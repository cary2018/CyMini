!function(g,U){"object"==typeof exports&&"undefined"!=typeof module?U(exports):"function"==typeof define&&define.amd?define(["exports"],U):U((g="undefined"!=typeof globalThis?globalThis:g||self).window=g.window||{})}(this,function(g){"use strict";function U(g,U){var a=Object.keys(g);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(g);U&&(Z=Z.filter(function(U){return Object.getOwnPropertyDescriptor(g,U).enumerable})),a.push.apply(a,Z)}return a}function a(g){for(var a=1;a<arguments.length;a++){var Z=null!=arguments[a]?arguments[a]:{};a%2?U(Object(Z),!0).forEach(function(U){H(g,U,Z[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(Z)):U(Object(Z)).forEach(function(U){Object.defineProperty(g,U,Object.getOwnPropertyDescriptor(Z,U))})}return g}function Z(g){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(g)}function aF(g,U){if(!(g instanceof U))throw new TypeError("Cannot call a class as a function")}function e(g,U){for(var a=0;a<U.length;a++){var Z=U[a];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(g,Z.key,Z)}}function ab(g,U,a){return U&&e(g.prototype,U),a&&e(g,a),g}function H(g,U,a){return U in g?Object.defineProperty(g,U,{value:a,enumerable:!0,configurable:!0,writable:!0}):g[U]=a,g}function c(g,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(U&&U.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),U&&ai(g,U)}function Q(g){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(g)}function ai(g,U){return(ai=Object.setPrototypeOf||function(g,U){return g.__proto__=U,g})(g,U)}function f(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function E(g,U){return!U||"object"!=typeof U&&"function"!=typeof U?f(g):U}function gD(g){var U=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}();return function(){var a,Z=Q(g);if(U){var aF=Q(this).constructor;a=Reflect.construct(Z,arguments,aF)}else a=Z.apply(this,arguments);return E(this,a)}}function b(g,U){return function(g){if(Array.isArray(g))return g}(g)||function(g,U){var a=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null==a)return;var Z,aF,e=[],ab=!0,H=!1;try{for(a=a.call(g);!(ab=(Z=a.next()).done)&&(e.push(Z.value),!U||e.length!==U);ab=!0);}catch(g){H=!0,aF=g}finally{try{ab||null==a.return||a.return()}finally{if(H)throw aF}}return e}(g,U)||fM(g,U)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(g){return function(g){if(Array.isArray(g))return eg(g)}(g)||function(g){if("undefined"!=typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||fM(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fM(g,U){if(g){if("string"==typeof g)return eg(g,U);var a=Object.prototype.toString.call(g).slice(8,-1);return"Object"===a&&g.constructor&&(a=g.constructor.name),"Map"===a||"Set"===a?Array.from(g):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?eg(g,U):void 0}}function eg(g,U){(null==U||U>g.length)&&(U=g.length);for(var a=0,Z=new Array(U);a<U;a++)Z[a]=g[a];return Z}function bi(g,U){var a="undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(!a){if(Array.isArray(g)||(a=fM(g))||U&&g&&"number"==typeof g.length){a&&(g=a);var Z=0,aF=function(){};return{s:aF,n:function(){return Z>=g.length?{done:!0}:{done:!1,value:g[Z++]}},e:function(g){throw g},f:aF}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,ab=!0,H=!1;return{s:function(){a=a.call(g)},n:function(){var g=a.next();return ab=g.done,g},e:function(g){H=!0,e=g},f:function(){try{ab||null==a.return||a.return()}finally{if(H)throw e}}}}var gh=function(g){return"object"===Z(g)&&null!==g&&g.constructor===Object&&"[object Object]"===Object.prototype.toString.call(g)},eS=function g(){for(var U=!1,a=arguments.length,aF=new Array(a),e=0;e<a;e++)aF[e]=arguments[e];"boolean"==typeof aF[0]&&(U=aF.shift());var ab=aF[0];if(!ab||"object"!==Z(ab))throw new Error("extendee must be an object");for(var H=aF.slice(1),c=H.length,Q=0;Q<c;Q++){var ai=H[Q];for(var f in ai)if(ai.hasOwnProperty(f)){var E=ai[f];if(U&&(Array.isArray(E)||gh(E))){var gD=Array.isArray(E)?[]:{};ab[f]=g(!0,ab.hasOwnProperty(f)?ab[f]:gD,E)}else ab[f]=E}}return ab},af=function(g){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return g=parseFloat(g)||0,Math.round((g+Number.EPSILON)*U)/U},fQ="undefined"!=typeof window&&window.ResizeObserver||function(){function g(U){aF(this,g),this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=U}return ab(g,[{key:"observe",value:function(g){if(!this.observables.some(function(U){return U.el===g})){var U={el:g,size:{height:g.clientHeight,width:g.clientWidth}};this.observables.push(U)}}},{key:"unobserve",value:function(g){this.observables=this.observables.filter(function(U){return U.el!==g})}},{key:"disconnect",value:function(){this.observables=[]}},{key:"check",value:function(){var g=this.observables.filter(function(g){var U=g.el.clientHeight,a=g.el.clientWidth;if(g.size.height!==U||g.size.width!==a)return g.size.height=U,g.size.width=a,!0}).map(function(g){return g.el});g.length>0&&this.callback(g),window.requestAnimationFrame(this.boundCheck)}}]),g}(),d=function(){var g=window.getSelection?window.getSelection():document.selection;g&&g.rangeCount&&g.getRangeAt(0).getClientRects().length&&(g.removeAllRanges?g.removeAllRanges():g.empty&&g.empty())},gb=function g(U){aF(this,g),this.id=-1,this.id=U.pointerId||U.identifier||-1,this.pageX=U.pageX,this.pageY=U.pageY,this.clientX=U.clientX,this.clientY=U.clientY,this.nativePointer=U};function X(g,U){return U?Math.sqrt(Math.pow(U.clientX-g.clientX,2)+Math.pow(U.clientY-g.clientY,2)):0}function cB(g,U){return U?{clientX:(g.clientX+U.clientX)/2,clientY:(g.clientY+U.clientY)/2}:g}var eQ=function(){function g(U){var a=this,Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=Z.start,ab=void 0===e?function(){return!0}:e,H=Z.move,c=void 0===H?function(){}:H,Q=Z.end,ai=void 0===Q?function(){}:Q;aF(this,g),this.element=U,this.startPointers=[],this.currentPointers=[],this.startCallback=ab,this.moveCallback=c,this.endCallback=ai,this.onStart=function(g){if(!g.button||0===g.button){var U=new gb(g);if(!1===a.startCallback(U,g))return!1;g.preventDefault(),d(),a.currentPointers.push(U),a.startPointers.push(U),(g.target&&"setPointerCapture"in g.target?g.target:a.element).setPointerCapture(g.pointerId),a.element.addEventListener("pointermove",a.onMove),a.element.addEventListener("pointerup",a.onEnd),a.element.addEventListener("pointercancel",a.onEnd)}},this.onMove=function(g){for(var U=a.currentPointers.slice(),Z=[],aF=function(){var g=ab[e],U=a.currentPointers.findIndex(function(U){return U.id===g.id});if(U<0)return"continue";Z.push(g),a.currentPointers[U]=g},e=0,ab=[new gb(g)];e<ab.length;e++)aF();Z.length&&a.moveCallback(U,a.currentPointers,g)},this.onEnd=function(g){var U=new gb(g),Z=a.currentPointers.findIndex(function(g){return g.id===U.id});if(-1===Z)return!1;a.currentPointers.splice(Z,1),a.startPointers.splice(Z,1),a.endCallback(U,g),a.currentPointers.length||(a.element.removeEventListener("pointermove",a.onMove),a.element.removeEventListener("pointerup",a.onEnd),a.element.removeEventListener("pointercancel",a.onEnd))},this.element.addEventListener("pointerdown",this.onStart)}return ab(g,[{key:"stop",value:function(){this.element.removeEventListener("pointerdown",this.onStart),this.element.removeEventListener("pointermove",this.onMove),this.element.removeEventListener("pointerup",this.onEnd),this.element.removeEventListener("pointercancel",this.onEnd)}}]),g}(),eG=function g(U){return!(!U||U===document.body)&&(function(g){var U=window.getComputedStyle(g)["overflow-y"],a=window.getComputedStyle(g)["overflow-x"],Z=("scroll"===U||"auto"===U)&&Math.abs(g.scrollHeight-g.clientHeight)>1,aF=("scroll"===a||"auto"===a)&&Math.abs(g.scrollWidth-g.clientWidth)>1;return Z||aF}(U)?U:g(U.parentNode))},eSc=function(){function g(){var U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};aF(this,g),this.options=eS(!0,{},U),this.plugins=[],this.events={};for(var a=0,Z=["on","once"];a<Z.length;a++)for(var e=Z[a],ab=0,H=Object.entries(this.options[e]||{});ab<H.length;ab++){var c=H[ab];this[e].apply(this,C(c))}}return ab(g,[{key:"option",value:function(g,U){g=String(g);var a,Z,aF=(a=g,Z=this.options,a.split(".").reduce(function(g,U){return g&&g[U]},Z));return"function"==typeof aF&&(aF=aF.call(this,g)),void 0===aF?U:aF}},{key:"localize",value:function(g){var U=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return String(g).replace(/\{\{(\w+).?(\w+)?\}\}/g,function(g,Z,aF){var e=!1;if(!(e=aF?U.option("".concat(Z[0]+Z.toLowerCase().substring(1),".l10n.").concat(aF)):U.option("l10n.".concat(Z))))return Z;for(var ab=0;ab<a.length;ab++)e=e.split(a[ab][0]).join(a[ab][1]);return e})}},{key:"on",value:function(g,U){var a=this;if(gh(g)){for(var Z=0,aF=Object.entries(g);Z<aF.length;Z++){var e=aF[Z];this.on.apply(this,C(e))}return this}return String(g).split(" ").forEach(function(g){var Z=a.events[g]=a.events[g]||[];-1==Z.indexOf(U)&&Z.push(U)}),this}},{key:"once",value:function(g,U){var a=this;if(gh(g)){for(var Z=0,aF=Object.entries(g);Z<aF.length;Z++){var e=aF[Z];this.once.apply(this,C(e))}return this}return String(g).split(" ").forEach(function(g){var Z=function Z(){a.off(g,Z);for(var aF=arguments.length,e=new Array(aF),ab=0;ab<aF;ab++)e[ab]=arguments[ab];U.call.apply(U,[a,a].concat(e))};Z._=U,a.on(g,Z)}),this}},{key:"off",value:function(g,U){var a=this;if(!gh(g))return g.split(" ").forEach(function(g){var Z=a.events[g];if(!Z||!Z.length)return a;for(var aF=-1,e=0,ab=Z.length;e<ab;e++){var H=Z[e];if(H&&(H===U||H._===U)){aF=e;break}}-1!=aF&&Z.splice(aF,1)}),this;for(var Z=0,aF=Object.entries(g);Z<aF.length;Z++){var e=aF[Z];this.off.apply(this,C(e))}}},{key:"trigger",value:function(g){for(var U=arguments.length,a=new Array(U>1?U-1:0),Z=1;Z<U;Z++)a[Z-1]=arguments[Z];var aF,e=bi(C(this.events[g]||[]).slice());try{for(e.s();!(aF=e.n()).done;){var ab=aF.value;if(ab&&!1===ab.call.apply(ab,[this,this].concat(a)))return!1}}catch(g){e.e(g)}finally{e.f()}var H,c=bi(C(this.events["*"]||[]).slice());try{for(c.s();!(H=c.n()).done;){var Q=H.value;if(Q&&!1===Q.call.apply(Q,[this,g,this].concat(a)))return!1}}catch(g){c.e(g)}finally{c.f()}return!0}},{key:"attachPlugins",value:function(g){for(var U={},a=0,Z=Object.entries(g||{});a<Z.length;a++){var aF=b(Z[a],2),e=aF[0],ab=aF[1];!1===this.options[e]||this.plugins[e]||(this.options[e]=eS({},ab.defaults||{},this.options[e]),U[e]=new ab(this))}for(var H=0,c=Object.entries(U);H<c.length;H++){var Q=b(c[H],2);Q[0],Q[1].attach(this)}return this.plugins=Object.assign({},this.plugins,U),this}},{key:"detachPlugins",value:function(){for(var g in this.plugins){var U=void 0;(U=this.plugins[g])&&"function"==typeof U.detach&&U.detach(this)}return this.plugins={},this}}]),g}(),T={touch:!0,zoom:!0,pinchToZoom:!0,panOnlyZoomed:!1,lockAxis:!1,friction:.64,decelFriction:.88,zoomFriction:.74,bounceForce:.2,baseScale:1,minScale:1,maxScale:2,step:.5,textSelection:!1,click:"toggleZoom",wheel:"zoom",wheelFactor:42,wheelLimit:5,draggableClass:"is-draggable",draggingClass:"is-dragging",ratio:1},df=function(g){c(Z,g);var U=gD(Z);function Z(g){var a,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aF(this,Z),(a=U.call(this,eS(!0,{},T,e))).state="init",a.$container=g;for(var ab=0,H=["onLoad","onWheel","onClick"];ab<H.length;ab++){var c=H[ab];a[c]=a[c].bind(f(a))}return a.initLayout(),a.resetValues(),a.attachPlugins(Z.Plugins),a.trigger("init"),a.updateMetrics(),a.attachEvents(),a.trigger("ready"),!1===a.option("centerOnStart")?a.state="ready":a.panTo({friction:0}),a}return ab(Z,[{key:"initLayout",value:function(){var g=this.$container;if(!(g instanceof HTMLElement))throw new Error("Panzoom: Container not found");var U=this.option("content")||g.querySelector(".panzoom__content");if(!U)throw new Error("Panzoom: Content not found");this.$content=U;var a,Z=this.option("viewport")||g.querySelector(".panzoom__viewport");Z||!1===this.option("wrapInner")||((Z=document.createElement("div")).classList.add("panzoom__viewport"),(a=Z).append.apply(a,C(g.childNodes)),g.appendChild(Z));this.$viewport=Z||U.parentNode}},{key:"resetValues",value:function(){this.updateRate=this.option("updateRate",/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?250:24),this.container={width:0,height:0},this.viewport={width:0,height:0},this.content={origHeight:0,origWidth:0,width:0,height:0,x:this.option("x",0),y:this.option("y",0),scale:this.option("baseScale")},this.transform={x:0,y:0,scale:1},this.resetDragPosition()}},{key:"onLoad",value:function(g){this.updateMetrics(),this.panTo({scale:this.option("baseScale"),friction:0}),this.trigger("load",g)}},{key:"onClick",value:function(g){if(!g.defaultPrevented)if(this.option("textSelection")&&window.getSelection().toString().length)g.stopPropagation();else{var U=this.$content.getClientRects()[0];if("ready"!==this.state&&(this.dragPosition.midPoint||Math.abs(U.top-this.dragStart.rect.top)>1||Math.abs(U.left-this.dragStart.rect.left)>1))return g.preventDefault(),void g.stopPropagation();!1!==this.trigger("click",g)&&this.option("zoom")&&"toggleZoom"===this.option("click")&&(g.preventDefault(),g.stopPropagation(),this.zoomWithClick(g))}}},{key:"onWheel",value:function(g){!1!==this.trigger("wheel",g)&&this.option("zoom")&&this.option("wheel")&&this.zoomWithWheel(g)}},{key:"zoomWithWheel",value:function(g){void 0===this.changedDelta&&(this.changedDelta=0);var U=Math.max(-1,Math.min(1,-g.deltaY||-g.deltaX||g.wheelDelta||-g.detail)),a=this.content.scale,Z=a*(100+U*this.option("wheelFactor"))/100;if(U<0&&Math.abs(a-this.option("minScale"))<.01||U>0&&Math.abs(a-this.option("maxScale"))<.01?(this.changedDelta+=Math.abs(U),Z=a):(this.changedDelta=0,Z=Math.max(Math.min(Z,this.option("maxScale")),this.option("minScale"))),!(this.changedDelta>this.option("wheelLimit"))&&(g.preventDefault(),Z!==a)){var aF=this.$content.getBoundingClientRect(),e=g.clientX-aF.left,ab=g.clientY-aF.top;this.zoomTo(Z,{x:e,y:ab})}}},{key:"zoomWithClick",value:function(g){var U=this.$content.getClientRects()[0],a=g.clientX-U.left,Z=g.clientY-U.top;this.toggleZoom({x:a,y:Z})}},{key:"attachEvents",value:function(){var g=this;this.$content.addEventListener("load",this.onLoad),this.$container.addEventListener("wheel",this.onWheel,{passive:!1}),this.$container.addEventListener("click",this.onClick,{passive:!1}),this.initObserver();var U=new eQ(this.$container,{start:function(a,Z){if(!g.option("touch"))return!1;if(!(g.velocity.scale<0)){if(!U.currentPointers.length){if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(Z.target.nodeName))return!1;if(g.option("textSelection")&&function(g,U,a){for(var Z=g.childNodes,aF=document.createRange(),e=0;e<Z.length;e++){var ab=Z[e];if(ab.nodeType===Node.TEXT_NODE){aF.selectNodeContents(ab);var H=aF.getBoundingClientRect();if(U>=H.left&&a>=H.top&&U<=H.right&&a<=H.bottom)return ab}}return!1}(Z.target,Z.clientX,Z.clientY))return!1;if(eG(Z.target))return!1}return!1!==g.trigger("touchStart",Z)&&(g.state="pointerdown",g.resetDragPosition(),g.dragPosition.midPoint=null,g.dragPosition.time=Date.now(),!0)}},move:function(a,Z,aF){if("pointerdown"===g.state)if(0!=g.trigger("touchMove",aF)){if(!(Z.length<2&&1==g.option("panOnlyZoomed")&&g.content.width<=g.viewport.width&&g.content.height<=g.viewport.height&&g.transform.scale<=g.option("baseScale"))&&(!(Z.length>1)||g.option("zoom")&&!1!==g.option("pinchToZoom"))){aF.preventDefault(),aF.stopPropagation();var e=cB(a[0],a[1]),ab=cB(Z[0],Z[1]),H=ab.clientX-e.clientX,c=ab.clientY-e.clientY,Q=X(a[0],a[1]),ai=X(Z[0],Z[1]),f=Q?ai/Q:1;g.dragOffset.x+=H,g.dragOffset.y+=c,g.dragOffset.scale*=f,g.dragOffset.time=Date.now()-g.dragPosition.time;var E=1===g.dragStart.scale&&g.option("lockAxis");if(E&&!g.lockAxis){if(Math.abs(g.dragOffset.x)<6&&Math.abs(g.dragOffset.y)<6)return;if("xy"===E){var gD=Math.abs(180*Math.atan2(g.dragOffset.y,g.dragOffset.x)/Math.PI);g.lockAxis=gD>45&&gD<135?"y":"x"}else g.lockAxis=E}if(g.lockAxis&&(g.dragOffset["x"===g.lockAxis?"y":"x"]=0),g.$container.classList.add(g.option("draggingClass")),g.transform.scale===g.option("baseScale")&&"y"===g.lockAxis||(g.dragPosition.x=g.dragStart.x+g.dragOffset.x),g.transform.scale===g.option("baseScale")&&"x"===g.lockAxis||(g.dragPosition.y=g.dragStart.y+g.dragOffset.y),g.dragPosition.scale=g.dragStart.scale*g.dragOffset.scale,Z.length>1){var b=cB(U.startPointers[0],U.startPointers[1]),C=b.clientX-g.dragStart.rect.x,fM=b.clientY-g.dragStart.rect.y,eg=g.getZoomDelta(g.content.scale*g.dragOffset.scale,C,fM),bi=eg.deltaX,gh=eg.deltaY;g.dragPosition.x-=bi,g.dragPosition.y-=gh,g.dragPosition.midPoint=ab}else g.setDragResistance();g.transform={x:g.dragPosition.x,y:g.dragPosition.y,scale:g.dragPosition.scale},g.startAnimation()}}else aF.preventDefault()},end:function(Z,aF){if("pointerdown"===g.state)if(g._dragOffset=a({},g.dragOffset),U.currentPointers.length)g.resetDragPosition();else if(g.state="decel",g.friction=g.option("decelFriction"),g.recalculateTransform(),g.$container.classList.remove(g.option("draggingClass")),!1!==g.trigger("touchEnd",aF)&&"decel"===g.state){var e=g.option("minScale");if(g.transform.scale<e)g.zoomTo(e,{friction:.64});else{var ab=g.option("maxScale");if(g.transform.scale-ab>.01){var H=g.dragPosition.midPoint||Z,c=g.$content.getClientRects()[0];g.zoomTo(ab,{friction:.64,x:H.clientX-c.left,y:H.clientY-c.top})}else;}}}});this.pointerTracker=U}},{key:"initObserver",value:function(){var g=this;this.resizeObserver||(this.resizeObserver=new fQ(function(){g.updateTimer||(g.updateTimer=setTimeout(function(){var U=g.$container.getBoundingClientRect();U.width&&U.height?((Math.abs(U.width-g.container.width)>1||Math.abs(U.height-g.container.height)>1)&&(g.isAnimating()&&g.endAnimation(),g.updateMetrics(),g.panTo({x:g.content.x,y:g.content.y,scale:g.option("baseScale"),friction:0})),g.updateTimer=null):g.updateTimer=null},g.updateRate))}),this.resizeObserver.observe(this.$container))}},{key:"resetDragPosition",value:function(){this.lockAxis=null,this.friction=this.option("friction"),this.velocity={x:0,y:0,scale:0};var g=this.content,U=g.x,Z=g.y,aF=g.scale;this.dragStart={rect:this.$content.getBoundingClientRect(),x:U,y:Z,scale:aF},this.dragPosition=a(a({},this.dragPosition),{},{x:U,y:Z,scale:aF}),this.dragOffset={x:0,y:0,scale:1,time:0}}},{key:"updateMetrics",value:function(g){!0!==g&&this.trigger("beforeUpdate");var U,Z=this.$container,aF=this.$content,e=this.$viewport,ab=this.$content instanceof HTMLImageElement,H=this.option("zoom"),c=this.option("resizeParent",H),Q=(U=this.$content,Math.max(parseFloat(U.naturalWidth||0),parseFloat(U.width&&U.width.baseVal&&U.width.baseVal.value||0),parseFloat(U.offsetWidth||0),parseFloat(U.scrollWidth||0))),ai=function(g){return Math.max(parseFloat(g.naturalHeight||0),parseFloat(g.height&&g.height.baseVal&&g.height.baseVal.value||0),parseFloat(g.offsetHeight||0),parseFloat(g.scrollHeight||0))}(this.$content);Object.assign(aF.style,{width:"",height:"",maxWidth:"",maxHeight:""}),c&&Object.assign(e.style,{width:"",height:""});var f=this.option("ratio"),E=Q=af(Q*f),gD=ai=af(ai*f),b=aF.getBoundingClientRect(),C=e.getBoundingClientRect(),fM=e==Z?C:Z.getBoundingClientRect(),eg=Math.max(e.offsetWidth,af(C.width)),bi=Math.max(e.offsetHeight,af(C.height)),gh=window.getComputedStyle(e);if(eg-=parseFloat(gh.paddingLeft)+parseFloat(gh.paddingRight),bi-=parseFloat(gh.paddingTop)+parseFloat(gh.paddingBottom),this.viewport.width=eg,this.viewport.height=bi,H){if(Math.abs(Q-b.width)>.1||Math.abs(ai-b.height)>.1){var eS=function(g,U,a,Z){var aF=Math.min(a/g||0,Z/U);return{width:g*aF||0,height:U*aF||0}}(Q,ai,Math.min(Q,b.width),Math.min(ai,b.height));E=af(eS.width),gD=af(eS.height)}Object.assign(aF.style,{width:"".concat(E,"px"),height:"".concat(gD,"px"),transform:""})}if(c&&(Object.assign(e.style,{width:"".concat(E,"px"),height:"".concat(gD,"px")}),this.viewport=a(a({},this.viewport),{},{width:E,height:gD})),ab&&H&&"function"!=typeof this.options.maxScale){var fQ=this.option("maxScale");this.options.maxScale=function(){return this.content.origWidth>0&&this.content.fitWidth>0?this.content.origWidth/this.content.fitWidth:fQ}}this.content=a(a({},this.content),{},{origWidth:Q,origHeight:ai,fitWidth:E,fitHeight:gD,width:E,height:gD,scale:1,isZoomable:H}),this.container={width:fM.width,height:fM.height},!0!==g&&this.trigger("afterUpdate")}},{key:"zoomIn",value:function(g){this.zoomTo(this.content.scale+(g||this.option("step")))}},{key:"zoomOut",value:function(g){this.zoomTo(this.content.scale-(g||this.option("step")))}},{key:"toggleZoom",value:function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=this.option("maxScale"),a=this.option("baseScale"),Z=this.content.scale>a+.5*(U-a)?a:U;this.zoomTo(Z,g)}},{key:"zoomTo",value:function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("baseScale"),U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=U.x,Z=void 0===a?null:a,aF=U.y,e=void 0===aF?null:aF;g=Math.max(Math.min(g,this.option("maxScale")),this.option("minScale"));var ab=af(this.content.scale/(this.content.width/this.content.fitWidth),1e7);null===Z&&(Z=this.content.width*ab*.5),null===e&&(e=this.content.height*ab*.5);var H=this.getZoomDelta(g,Z,e),c=H.deltaX,Q=H.deltaY;Z=this.content.x-c,e=this.content.y-Q,this.panTo({x:Z,y:e,scale:g,friction:this.option("zoomFriction")})}},{key:"getZoomDelta",value:function(g){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Z=this.content.fitWidth*this.content.scale,aF=this.content.fitHeight*this.content.scale,e=U>0&&Z?U/Z:0,ab=a>0&&aF?a/aF:0,H=this.content.fitWidth*g,c=this.content.fitHeight*g,Q=(H-Z)*e,ai=(c-aF)*ab;return{deltaX:Q,deltaY:ai}}},{key:"panTo",value:function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=g.x,a=void 0===U?this.content.x:U,Z=g.y,aF=void 0===Z?this.content.y:Z,e=g.scale,ab=g.friction,H=void 0===ab?this.option("friction"):ab,c=g.ignoreBounds,Q=void 0!==c&&c;if(e=e||this.content.scale||1,!Q){var ai=this.getBounds(e),f=ai.boundX,E=ai.boundY;f&&(a=Math.max(Math.min(a,f.to),f.from)),E&&(aF=Math.max(Math.min(aF,E.to),E.from))}this.friction=H,this.transform={x:a,y:aF,scale:e},H?(this.state="panning",this.velocity={x:(1/this.friction-1)*(a-this.content.x),y:(1/this.friction-1)*(aF-this.content.y),scale:(1/this.friction-1)*(e-this.content.scale)},this.startAnimation()):this.endAnimation()}},{key:"startAnimation",value:function(){var g=this;this.rAF?cancelAnimationFrame(this.rAF):this.trigger("startAnimation"),this.rAF=requestAnimationFrame(function(){return g.animate()})}},{key:"animate",value:function(){var g=this;if(this.setEdgeForce(),this.setDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.content.x+=this.velocity.x,this.content.y+=this.velocity.y,this.content.scale+=this.velocity.scale,this.isAnimating())this.setTransform();else if("pointerdown"!==this.state)return this.endAnimation(),void this.trigger("endAnimation");this.rAF=requestAnimationFrame(function(){return g.animate()})}},{key:"getBounds",value:function(g){var U=this.boundX,a=this.boundY;if(void 0!==U&&void 0!==a)return{boundX:U,boundY:a};U={from:0,to:0},a={from:0,to:0},g=g||this.transform.scale;var Z=this.content.fitWidth,aF=this.content.fitHeight,e=Z*g,ab=aF*g,H=this.viewport.width,c=this.viewport.height;if(Z<=H){var Q=.5*(H-e),ai=.5*(e-Z);U.from=af(Q-ai),U.to=af(Q+ai)}else U.from=af(H-e);if(aF<=c){var f=.5*(c-ab),E=.5*(ab-aF);a.from=af(f-E),a.to=af(f+E)}else a.from=af(c-e);return{boundX:U,boundY:a}}},{key:"setEdgeForce",value:function(){if("decel"===this.state){var g,U,a,Z,aF=this.option("bounceForce"),e=this.getBounds(Math.max(this.transform.scale,this.content.scale)),ab=e.boundX,H=e.boundY;if(ab&&(g=this.content.x<ab.from,U=this.content.x>ab.to),H&&(a=this.content.y<H.from,Z=this.content.y>H.to),g||U){var c=((g?ab.from:ab.to)-this.content.x)*aF,Q=this.content.x+(this.velocity.x+c)/this.friction;Q>=ab.from&&Q<=ab.to&&(c+=this.velocity.x),this.velocity.x=c,this.recalculateTransform()}if(a||Z){var ai=((a?H.from:H.to)-this.content.y)*aF,f=this.content.y+(ai+this.velocity.y)/this.friction;f>=H.from&&f<=H.to&&(ai+=this.velocity.y),this.velocity.y=ai,this.recalculateTransform()}}}},{key:"setDragResistance",value:function(){if("pointerdown"===this.state){var g,U,a,Z,aF=this.getBounds(this.dragPosition.scale),e=aF.boundX,ab=aF.boundY;if(e&&(g=this.dragPosition.x<e.from,U=this.dragPosition.x>e.to),ab&&(a=this.dragPosition.y<ab.from,Z=this.dragPosition.y>ab.to),(g||U)&&(!g||!U)){var H=g?e.from:e.to,c=H-this.dragPosition.x;this.dragPosition.x=H-.3*c}if((a||Z)&&(!a||!Z)){var Q=a?ab.from:ab.to,ai=Q-this.dragPosition.y;this.dragPosition.y=Q-.3*ai}}}},{key:"setDragForce",value:function(){"pointerdown"===this.state&&(this.velocity.x=this.dragPosition.x-this.content.x,this.velocity.y=this.dragPosition.y-this.content.y,this.velocity.scale=this.dragPosition.scale-this.content.scale)}},{key:"recalculateTransform",value:function(){this.transform.x=this.content.x+this.velocity.x/(1/this.friction-1),this.transform.y=this.content.y+this.velocity.y/(1/this.friction-1),this.transform.scale=this.content.scale+this.velocity.scale/(1/this.friction-1)}},{key:"isAnimating",value:function(){return!(!this.friction||!(Math.abs(this.velocity.x)>.05||Math.abs(this.velocity.y)>.05||Math.abs(this.velocity.scale)>.05))}},{key:"setTransform",value:function(g){var U,Z,aF,e,ab;(g?(U=af(this.transform.x),Z=af(this.transform.y),aF=this.transform.scale,this.content=a(a({},this.content),{},{x:U,y:Z,scale:aF})):(U=af(this.content.x),Z=af(this.content.y),aF=this.content.scale/(this.content.width/this.content.fitWidth),this.content=a(a({},this.content),{},{x:U,y:Z})),this.trigger("beforeTransform"),U=af(this.content.x),Z=af(this.content.y),g&&this.option("zoom"))?(e=af(this.content.fitWidth*aF),ab=af(this.content.fitHeight*aF),this.content.width=e,this.content.height=ab,this.transform=a(a({},this.transform),{},{width:e,height:ab,scale:aF}),Object.assign(this.$content.style,{width:"".concat(e,"px"),height:"".concat(ab,"px"),maxWidth:"none",maxHeight:"none",transform:"translate3d(".concat(U,"px, ").concat(Z,"px, 0) scale(1)")})):this.$content.style.transform="translate3d(".concat(U,"px, ").concat(Z,"px, 0) scale(").concat(aF,")");this.trigger("afterTransform")}},{key:"endAnimation",value:function(){cancelAnimationFrame(this.rAF),this.rAF=null,this.velocity={x:0,y:0,scale:0},this.setTransform(!0),this.state="ready",this.handleCursor()}},{key:"handleCursor",value:function(){var g=this.option("draggableClass");g&&this.option("touch")&&(1==this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale")?this.$container.classList.remove(g):this.$container.classList.add(g))}},{key:"detachEvents",value:function(){this.$content.removeEventListener("load",this.onLoad),this.$container.removeEventListener("wheel",this.onWheel,{passive:!1}),this.$container.removeEventListener("click",this.onClick,{passive:!1}),this.pointerTracker&&(this.pointerTracker.stop(),this.pointerTracker=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"destroy",value:function(){"destroy"!==this.state&&(this.state="destroy",clearTimeout(this.updateTimer),this.updateTimer=null,cancelAnimationFrame(this.rAF),this.rAF=null,this.detachEvents(),this.detachPlugins(),this.resetDragPosition())}}]),Z}(eSc);df.version="4.0.0-beta.2",df.Plugins={};var ej=function(g,U){var a=0;return function(){var Z=(new Date).getTime();if(!(Z-a<U))return a=Z,g.apply(void 0,arguments)}},eU=function(){function g(U){aF(this,g),this.$container=null,this.$prev=null,this.$next=null,this.carousel=U,this.onRefresh=this.onRefresh.bind(this)}return ab(g,[{key:"option",value:function(g){return this.carousel.option("Navigation.".concat(g))}},{key:"createButton",value:function(g){var U,a=this,Z=document.createElement("button");Z.setAttribute("title",this.carousel.localize("{{".concat(g.toUpperCase(),"}}")));var aF=this.option("classNames.button")+" "+this.option("classNames.".concat(g));return(U=Z.classList).add.apply(U,C(aF.split(" "))),Z.setAttribute("tabindex","0"),Z.innerHTML=this.carousel.localize(this.option("".concat(g,"Tpl"))),Z.addEventListener("click",function(U){U.preventDefault(),U.stopPropagation(),a.carousel["slide".concat("next"===g?"Next":"Prev")]()}),Z}},{key:"build",value:function(){this.$container||(this.$container=document.createElement("div"),this.$container.classList.add(this.option("classNames.main")),this.carousel.$container.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}},{key:"onRefresh",value:function(){var g=this.carousel.pages.length;g<=1||g>1&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesPerPage"))?this.cleanup():(this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=g-1&&this.$next.setAttribute("disabled","")))}},{key:"cleanup",value:function(){this.$prev&&this.$prev.remove(),this.$prev=null,this.$next&&this.$next.remove(),this.$next=null,this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.carousel.on("refresh change",this.onRefresh)}},{key:"detach",value:function(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}}]),g}();eU.defaults={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',classNames:{main:"carousel__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}};var ad=function(){function g(U){aF(this,g),this.carousel=U,this.$list=null,this.events={change:this.onChange.bind(this),refresh:this.onRefresh.bind(this)}}return ab(g,[{key:"buildList",value:function(){var g=this;if(!(this.carousel.pages.length<2)){var U=document.createElement("ol");return U.classList.add("carousel__dots"),U.addEventListener("click",function(U){if("page"in U.target.dataset){U.preventDefault(),U.stopPropagation();var a=parseInt(U.target.dataset.page,10),Z=g.carousel;a!==Z.page&&(Z.pages.length<3&&Z.option("infinite")?Z[0==a?"slidePrev":"slideNext"]():Z.slideTo(a))}}),this.$list=U,this.carousel.$container.appendChild(U),this.carousel.$container.classList.add("has-dots"),U}}},{key:"removeList",value:function(){this.$list&&(this.$list.parentNode.removeChild(this.$list),this.$list=null),this.carousel.$container.classList.remove("has-dots")}},{key:"rebuildDots",value:function(){var g=this,U=this.$list,a=!!U,Z=this.carousel.pages.length;if(Z<2)a&&this.removeList();else{a||(U=this.buildList());var aF=this.$list.children.length;if(aF>Z)for(var e=Z;e<aF;e++)this.$list.removeChild(this.$list.lastChild);else{for(var ab=function(U){var a=document.createElement("li");a.classList.add("carousel__dot"),a.dataset.page=U,a.setAttribute("role","button"),a.setAttribute("tabindex","0"),a.setAttribute("title",g.carousel.localize("{{GOTO}}",[["%d",U+1]])),a.addEventListener("keydown",function(g){var U,Z=g.code;"Enter"===Z||"NumpadEnter"===Z?U=a:"ArrowRight"===Z?U=a.nextSibling:"ArrowLeft"===Z&&(U=a.previousSibling),U&&U.click()}),g.$list.appendChild(a)},H=aF;H<Z;H++)ab(H);this.setActiveDot()}}}},{key:"setActiveDot",value:function(){if(this.$list){this.$list.childNodes.forEach(function(g){g.classList.remove("is-selected")});var g=this.$list.childNodes[this.carousel.page];g&&g.classList.add("is-selected")}}},{key:"onChange",value:function(){this.setActiveDot()}},{key:"onRefresh",value:function(){this.rebuildDots()}},{key:"attach",value:function(){this.carousel.on(this.events)}},{key:"detach",value:function(){this.removeList(),this.carousel.off(this.events),this.carousel=null}}]),g}(),h=function(){function g(U){aF(this,g),this.carousel=U,this.selectedIndex=null,this.friction=0,this.onNavReady=this.onNavReady.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}return ab(g,[{key:"addAsTargetFor",value:function(g){this.target=this.carousel,this.nav=g,this.attachEvents()}},{key:"addAsNavFor",value:function(g){this.target=g,this.nav=this.carousel,this.attachEvents()}},{key:"attachEvents",value:function(){this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.on("createSlide",this.onNavCreateSlide),this.nav.on("Panzoom.click",this.onNavClick),this.target.on("change",this.onTargetChange),this.target.on("Panzoom.afterUpdate",this.onTargetChange)}},{key:"onNavReady",value:function(){this.onTargetChange(!0)}},{key:"onNavClick",value:function(g,U,a){var Z=a.target.closest(".carousel__slide");if(Z){a.stopPropagation();var aF=parseInt(Z.dataset.index,10),e=this.target.findPageForSlide(aF);this.target.page!==e&&this.target.slideTo(e,{friction:this.friction}),this.markSelectedSlide(aF)}}},{key:"onNavCreateSlide",value:function(g,U){U.index===this.selectedIndex&&this.markSelectedSlide(U.index)}},{key:"onTargetChange",value:function(){var g=this.target.pages[this.target.page].indexes[0],U=this.nav.findPageForSlide(g);this.nav.slideTo(U),this.markSelectedSlide(g)}},{key:"markSelectedSlide",value:function(g){this.selectedIndex=g,C(this.nav.slides).filter(function(g){return g.$el&&g.$el.classList.remove("is-nav-selected")});var U=this.nav.slides[g];U&&U.$el&&U.$el.classList.add("is-nav-selected")}},{key:"attach",value:function(g){var U=g.options.Sync;(U.target||U.nav)&&(U.target?this.addAsNavFor(U.target):U.nav&&this.addAsTargetFor(U.nav),this.friction=U.friction)}},{key:"detach",value:function(){this.nav&&(this.nav.off("ready",this.onNavReady),this.nav.off("Panzoom.click",this.onNavClick),this.nav.off("createSlide",this.onNavCreateSlide)),this.target&&(this.target.off("Panzoom.afterUpdate",this.onTargetChange),this.target.off("change",this.onTargetChange))}}]),g}();h.defaults={friction:.92};var i={Navigation:eU,Dots:ad,Sync:h},j={slides:[],preload:0,slidesPerPage:"auto",initialPage:null,initialSlide:null,friction:.92,center:!0,infinite:!0,fill:!0,dragFree:!1,classNames:{viewport:"carousel__viewport",track:"carousel__track",slide:"carousel__slide",slideSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide %d"}},k=function(g){c(Z,g);var U=gD(Z);function Z(g){var a,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(aF(this,Z),e=eS(!0,{},j,e),(a=U.call(this,e)).state="init",a.$container=g,!(a.$container instanceof HTMLElement))throw new Error("No root element provided");return a.slideNext=ej(a.slideNext.bind(f(a)),250),a.slidePrev=ej(a.slidePrev.bind(f(a)),250),a.init(),a}return ab(Z,[{key:"init",value:function(){this.pages=[],this.page=this.pageIndex=null,this.prevPage=this.prevPageIndex=null,this.attachPlugins(Z.Plugins),this.trigger("init"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.$track.style.transform="translate3d(".concat(-1*this.pages[this.page].left,"px, 0px, 0) scale(1)"),this.manageSlideVisiblity(),this.initPanzoom(),this.state="ready",this.trigger("ready")}},{key:"initLayout",value:function(){var g,U,a=this.option("classNames");(this.$viewport=this.option("viewport")||this.$container.querySelector("."+a.viewport),this.$viewport)||(this.$viewport=document.createElement("div"),this.$viewport.classList.add(a.viewport),(g=this.$viewport).append.apply(g,C(this.$container.childNodes)),this.$container.appendChild(this.$viewport));(this.$track=this.option("track")||this.$container.querySelector("."+a.track),this.$track)||(this.$track=document.createElement("div"),this.$track.classList.add(a.track),(U=this.$track).append.apply(U,C(this.$viewport.childNodes)),this.$viewport.appendChild(this.$track))}},{key:"initSlides",value:function(){var g=this;this.slides=[],this.$viewport.querySelectorAll("."+this.option("classNames.slide")).forEach(function(U){var a={$el:U,isDom:!0};g.slides.push(a),g.trigger("createSlide",a,g.slides.length)}),Array.isArray(this.options.slides)&&(this.slides=eS(!0,C(this.slides),this.options.slides))}},{key:"updateMetrics",value:function(){var g,U=this,Z=0,aF=[];this.slides.forEach(function(a,e){var ab=a.$el,H=a.isDom||!g?U.getSlideMetrics(ab):g;a.index=e,a.width=H,a.left=Z,g=H,Z+=H,aF.push(e)});var e=Math.max(this.$track.offsetWidth,af(this.$track.getBoundingClientRect().width)),ab=window.getComputedStyle(this.$track);e-=parseFloat(ab.paddingLeft)+parseFloat(ab.paddingRight),this.contentWidth=Z,this.viewportWidth=e;var H=[],c=this.option("slidesPerPage");if(Number.isInteger(c)&&Z>e)for(var Q=0;Q<this.slides.length;Q+=c)H.push({indexes:aF.slice(Q,Q+c),slides:this.slides.slice(Q,Q+c)});else for(var ai=0,f=0,E=0;E<this.slides.length;E+=1){var gD=this.slides[E];(!H.length||f+gD.width>e)&&(H.push({indexes:[],slides:[]}),ai=H.length-1,f=0),f+=gD.width,H[ai].indexes.push(E),H[ai].slides.push(gD)}var b=this.option("center"),fM=this.option("fill");H.forEach(function(g,a){g.index=a,g.width=g.slides.reduce(function(g,U){return g+U.width},0),g.left=g.slides[0].left,b&&(g.left+=.5*(e-g.width)*-1),fM&&!U.option("infiniteX",U.option("infinite"))&&Z>e&&(g.left=Math.max(g.left,0),g.left=Math.min(g.left,Z-e))});var eg,bi=[];H.forEach(function(g){var U=a({},g);eg&&U.left===eg.left?(eg.width+=U.width,eg.slides=[].concat(C(eg.slides),C(U.slides)),eg.indexes=[].concat(C(eg.indexes),C(U.indexes))):(U.index=bi.length,eg=U,bi.push(U))}),this.pages=bi;var gh=this.page;if(null===gh){var eS=this.option("initialSlide");gh=null!==eS?this.findPageForSlide(eS):this.option("initialPage",0),bi[gh]||(gh=bi.length&&gh>bi.length?bi[bi.length-1].index:0),this.page=gh,this.pageIndex=gh}this.updatePanzoom(),this.trigger("refresh")}},{key:"getSlideMetrics",value:function(g){if(!g){var U,a=this.slides[0];if((g=document.createElement("div")).dataset.isTestEl=1,g.style.visibility="hidden",g.classList.add(this.option("classNames.slide")),a.customClass)(U=g.classList).add.apply(U,C(a.customClass.split(" ")));this.$track.prepend(g)}var Z=Math.max(g.offsetWidth,af(g.getBoundingClientRect().width)),aF=g.currentStyle||window.getComputedStyle(g);return Z=Z+(parseFloat(aF.marginLeft)||0)+(parseFloat(aF.marginRight)||0),g.dataset.isTestEl&&g.remove(),Z}},{key:"findPageForSlide",value:function(g){var U=this.pages.find(function(U){return U.indexes.indexOf(g)>-1});return U?U.index:null}},{key:"slideNext",value:function(){this.slideTo(this.pageIndex+1)}},{key:"slidePrev",value:function(){this.slideTo(this.pageIndex-1)}},{key:"slideTo",value:function(g){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=U.x,Z=void 0===a?-1*this.setPage(g,!0):a,aF=U.y,e=void 0===aF?0:aF,ab=U.friction,H=void 0===ab?this.option("friction"):ab;this.Panzoom.content.x===Z&&!this.Panzoom.velocity.x&&H||(this.Panzoom.panTo({x:Z,y:e,friction:H,ignoreBounds:!0}),"ready"===this.state&&"ready"===this.Panzoom.state&&this.trigger("settle"))}},{key:"initPanzoom",value:function(){var g=this;this.Panzoom&&this.Panzoom.destroy();var U=eS(!0,{},{content:this.$track,wrapInner:!1,resizeParent:!1,zoom:!1,click:!1,lockAxis:"x",x:-1*this.pages[this.page].left,centerOnStart:!1,textSelection:function(){return g.option("textSelection",!1)},panOnlyZoomed:function(){return this.content.width<=this.viewport.width}},this.option("Panzoom"));this.Panzoom=new df(this.$container,U),this.Panzoom.on({"*":function(U){for(var a=arguments.length,Z=new Array(a>1?a-1:0),aF=1;aF<a;aF++)Z[aF-1]=arguments[aF];return g.trigger.apply(g,["Panzoom.".concat(U)].concat(Z))},afterUpdate:function(){g.updatePage()},beforeTransform:this.onBeforeTransform.bind(this),touchEnd:this.onTouchEnd.bind(this),endAnimation:function(){g.trigger("settle")}}),this.updateMetrics(),this.manageSlideVisiblity()}},{key:"updatePanzoom",value:function(){this.Panzoom&&(this.Panzoom.content=a(a({},this.Panzoom.content),{},{fitWidth:this.contentWidth,origWidth:this.contentWidth,width:this.contentWidth}),this.pages.length>1&&this.option("infiniteX",this.option("infinite"))?this.Panzoom.boundX=null:this.Panzoom.boundX={from:-1*this.pages[this.pages.length-1].left,to:-1*this.pages[0].left},this.option("infiniteY",this.option("infinite"))?this.Panzoom.boundY=null:this.Panzoom.boundY={from:0,to:0},this.Panzoom.handleCursor())}},{key:"manageSlideVisiblity",value:function(){var g=this,U=this.contentWidth,a=this.viewportWidth,Z=this.Panzoom?-1*this.Panzoom.content.x:this.pages[this.page].left,aF=this.option("preload"),e=this.option("infiniteX",this.option("infinite")),ab=parseFloat(window.getComputedStyle(this.$viewport,null).getPropertyValue("padding-left")),H=parseFloat(window.getComputedStyle(this.$viewport,null).getPropertyValue("padding-right"));this.slides.forEach(function(c){var Q,ai,f=0;Q=Z-ab,ai=Z+a+H,Q-=aF*(a+ab+H),ai+=aF*(a+ab+H);var E=c.left+c.width>Q&&c.left<ai;Q=Z+U-ab,ai=Z+U+a+H,Q-=aF*(a+ab+H);var gD=e&&c.left+c.width>Q&&c.left<ai;Q=Z-U-ab,ai=Z-U+a+H,Q-=aF*(a+ab+H);var b=e&&c.left+c.width>Q&&c.left<ai;gD||E||b?(g.createSlideEl(c),E&&(f=0),gD&&(f=-1),b&&(f=1),c.left+c.width>Z&&c.left<=Z+a+H&&(f=0)):g.removeSlideEl(c),c.hasDiff=f});var c=0,Q=0;this.slides.forEach(function(g,a){var Z=0;g.$el?(a!==c||g.hasDiff?Z=Q+g.hasDiff*U:Q=0,g.$el.style.left=Math.abs(Z)>.1?"".concat(Q+g.hasDiff*U,"px"):"",c++):Q+=g.width}),this.markSelectedSlides()}},{key:"createSlideEl",value:function(g){if(g){if(!g.$el){var U,a=document.createElement("div");if(a.dataset.index=g.index,a.classList.add(this.option("classNames.slide")),g.customClass)(U=a.classList).add.apply(U,C(g.customClass.split(" ")));g.html&&(a.innerHTML=g.html);var Z=[];this.slides.forEach(function(g,U){g.$el&&Z.push(U)});var aF=g.index,e=null;if(Z.length){var ab=Z.reduce(function(g,U){return Math.abs(U-aF)<Math.abs(g-aF)?U:g});e=this.slides[ab]}return this.$track.insertBefore(a,e&&e.$el?e.index<g.index?e.$el.nextSibling:e.$el:null),g.$el=a,this.trigger("createSlide",g,aF),g}var H;parseInt(g.$el.dataset.index,10)!==g.index&&(g.$el.dataset.index=g.index,g.$el.querySelectorAll("[data-lazy-src]").forEach(function(g){var U=g.dataset.lazySrc;g instanceof HTMLImageElement?g.src=U:g.style.backgroundImage="url('".concat(U,"')")}),(H=g.$el.dataset.lazySrc)&&(g.$el.style.backgroundImage="url('".concat(H,"')")),g.state="ready")}}},{key:"removeSlideEl",value:function(g){g.$el&&!g.isDom&&(this.trigger("removeSlide",g),g.$el.remove(),g.$el=null)}},{key:"markSelectedSlides",value:function(){var g=this,U=this.option("classNames.slideSelected"),a="aria-hidden";this.slides.forEach(function(Z,aF){var e=Z.$el;if(e){var ab=g.pages[g.page];ab&&ab.indexes&&ab.indexes.indexOf(aF)>-1?(U&&!e.classList.contains(U)&&(e.classList.add(U),g.trigger("selectSlide",Z)),e.removeAttribute(a)):(U&&e.classList.contains(U)&&(e.classList.remove(U),g.trigger("unselectSlide",Z)),e.setAttribute(a,!0))}})}},{key:"updatePage",value:function(){this.updateMetrics(),this.slideTo(this.page,{friction:0})}},{key:"onBeforeTransform",value:function(){this.option("infiniteX",this.option("infinite"))&&this.manageInfiniteTrack(),this.manageSlideVisiblity()}},{key:"manageInfiniteTrack",value:function(){var g=this.contentWidth,U=this.viewportWidth;if(!(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||g<U)){var a=this.Panzoom,Z=!1;return a.content.x<-1*(g-U)&&(a.content.x+=g,this.pageIndex=this.pageIndex-this.pages.length,Z=!0),a.content.x>U&&(a.content.x-=g,this.pageIndex=this.pageIndex+this.pages.length,Z=!0),Z&&"pointerdown"===a.state&&a.resetDragPosition(),Z}}},{key:"onTouchEnd",value:function(g,U){var a=this.option("dragFree");if(!a&&this.pages.length>1&&g.dragOffset.time<350&&Math.abs(g.dragOffset.y)<1&&Math.abs(g.dragOffset.x)>5)this[g.dragOffset.x<0?"slideNext":"slidePrev"]();else if(a){var Z=b(this.getPageFromPosition(-1*g.transform.x),2)[1];this.setPage(Z)}else this.slideToClosest()}},{key:"slideToClosest",value:function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=this.getPageFromPosition(-1*this.Panzoom.content.x),a=b(U,2),Z=a[1];this.slideTo(Z,g)}},{key:"getPageFromPosition",value:function(g){var U=this.pages.length;this.option("center")&&(g+=.5*this.viewportWidth);var a=Math.floor(g/this.contentWidth);g-=a*this.contentWidth;var Z=this.slides.find(function(U){return U.left<=g&&U.left+U.width>g});if(Z){var aF=this.findPageForSlide(Z.index);return[aF,aF+a*U]}return[0,0]}},{key:"setPage",value:function(g,U){var a=0,Z=parseInt(g,10)||0,aF=this.page,e=this.pageIndex,ab=this.pages.length,H=this.contentWidth,c=this.viewportWidth;if(g=(Z%ab+ab)%ab,this.option("infiniteX",this.option("infinite"))&&H>c){var Q=Math.floor(Z/ab)||0,ai=H;if(a=this.pages[g].left+Q*ai,!0===U&&ab>2){var f=-1*this.Panzoom.content.x,E=a-ai,gD=a+ai,b=Math.abs(f-a),C=Math.abs(f-E),fM=Math.abs(f-gD);fM<b&&fM<=C?(a=gD,Z+=ab):C<b&&C<fM&&(a=E,Z-=ab)}}else g=Z=Math.max(0,Math.min(Z,ab-1)),a=this.pages[g].left;return this.page=g,this.pageIndex=Z,null!==aF&&g!==aF&&(this.prevPage=aF,this.prevPageIndex=e,this.trigger("change",g,aF)),a}},{key:"destroy",value:function(){var g=this;this.state="destroy",this.slides.forEach(function(U){g.removeSlideEl(U)}),this.slides=[],this.Panzoom.destroy(),this.detachPlugins()}}]),Z}(eSc);k.version="4.0.0-beta.2",k.Plugins=i;var l=!!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.document.body),m=function(){function g(U){aF(this,g),this.fancybox=U,this.viewport=null,this.pendingUpdate=null;for(var a=0,Z=["onReady","onResize","onTouchstart","onTouchmove"];a<Z.length;a++){var e=Z[a];this[e]=this[e].bind(this)}}return ab(g,[{key:"onReady",value:function(){var g=window.visualViewport;g&&(this.viewport=g,this.startY=0,g.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1})}},{key:"onResize",value:function(){this.updateViewport()}},{key:"updateViewport",value:function(){var g=this.fancybox,U=this.viewport,a=U.scale||1,Z=g.$container;if(Z){var aF="",e="",ab="";a-1>.1&&(aF="".concat(U.width*a,"px"),e="".concat(U.height*a,"px"),ab="translate3d(".concat(U.offsetLeft,"px, ").concat(U.offsetTop,"px, 0) scale(").concat(1/a,")")),Z.style.width=aF,Z.style.height=e,Z.style.transform=ab}}},{key:"onTouchstart",value:function(g){this.startY=g.touches?g.touches[0].screenY:g.screenY}},{key:"onTouchmove",value:function(g){var U=this.startY,a=window.innerWidth/window.document.documentElement.clientWidth;if(!(g.touches.length>1||1!==a)){var Z=g.target,aF=eG(Z);if(aF){var e=window.getComputedStyle(aF),ab=parseInt(e.getPropertyValue("height"),10),H=g.touches?g.touches[0].screenY:g.screenY,c=U<=H&&0===aF.scrollTop,Q=U>=H&&aF.scrollHeight-aF.scrollTop===ab;(c||Q)&&g.preventDefault()}else g.preventDefault()}}},{key:"cleanup",value:function(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);var g=this.viewport;g&&(g.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1)}},{key:"attach",value:function(){this.fancybox.on("initLayout",this.onReady)}},{key:"detach",value:function(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}}]),g}(),n=function(){function g(U){aF(this,g),this.fancybox=U,this.$container=null,this.state="init";for(var a=0,Z=["onPrepare","onClosing","onKeydown"];a<Z.length;a++){var e=Z[a];this[e]=this[e].bind(this)}this.events={prepare:this.onPrepare,closing:this.onClosing,keydown:this.onKeydown}}return ab(g,[{key:"onPrepare",value:function(){this.getSlides().length<this.fancybox.option("Thumbs.minSlideCount")?this.state="disabled":!0===this.fancybox.option("Thumbs.autoStart")&&this.fancybox.Carousel.Panzoom.content.height>=this.fancybox.option("Thumbs.minScreenHeight")&&this.build()}},{key:"onClosing",value:function(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}},{key:"onKeydown",value:function(g,U){U===g.option("Thumbs.key")&&this.toggle()}},{key:"build",value:function(){var g=this;if(!this.$container){var U=document.createElement("div");U.classList.add("fancybox__thumbs"),this.fancybox.$carousel.parentNode.insertBefore(U,this.fancybox.$carousel.nextSibling),this.Carousel=new k(U,eS(!0,{Dots:!1,Navigation:!1,Sync:{friction:0},infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,preload:1},this.fancybox.option("Thumbs.Carousel"),{Sync:{target:this.fancybox.Carousel},slides:this.getSlides()})),this.Carousel.Panzoom.on("wheel",function(U,a){a.preventDefault(),g.fancybox[a.deltaY<0?"prev":"next"]()}),this.$container=U,this.state="visible"}}},{key:"getSlides",value:function(){var g,U=[],a=bi(this.fancybox.items);try{for(a.s();!(g=a.n()).done;){var Z=g.value,aF=Z.thumb;aF&&U.push({html:'<div class="fancybox__thumb" style="background-image:url(\''.concat(aF,"')\"></div>"),customClass:"has-thumb has-".concat(Z.type||"image")})}}catch(g){a.e(g)}finally{a.f()}return U}},{key:"toggle",value:function(){return"visible"===this.state?(this.Carousel.Panzoom.detachEvents(),this.$container.style.display="none",void(this.state="hidden")):"hidden"===this.state?(this.$container.style.display="",this.Carousel.Panzoom.attachEvents(),void(this.state="visible")):void this.build()}},{key:"cleanup",value:function(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$container&&(this.$container.remove(),this.$container=null),this.state="init"}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),g}();n.defaults={minSlideCount:2,minScreenHeight:500,autoStart:!0,key:"t"};var o=function(g){return Object.entries(g).map(function(g){return g.map(encodeURIComponent).join("=")}).join("&")},p=function(){function g(U){aF(this,g),this.fancybox=U;for(var a=0,Z=["onInit","onReady","onCreateSlide","onRemoveSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"];a<Z.length;a++){var e=Z[a];this[e]=this[e].bind(this)}this.events={init:this.onInit,ready:this.onReady,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide,"Carousel.selectSlide":this.onSelectSlide,"Carousel.unselectSlide":this.onUnselectSlide,"Carousel.refresh":this.onRefresh}}return ab(g,[{key:"onInit",value:function(){var g,U=bi(this.fancybox.items);try{for(U.s();!(g=U.n()).done;){var a=g.value;this.processType(a)}}catch(g){U.e(g)}finally{U.f()}}},{key:"processType",value:function(g){if(g.html)return g.src=g.html,g.type="html",void delete g.html;var U=g.src||"",a=g.type||this.fancybox.options.type,Z=null;if(!U||"string"==typeof U){if(Z=U.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){var aF=o(this.fancybox.option("Html.youtube")),e=encodeURIComponent(Z[1]);g.videoId=e,g.src="https://www.youtube-nocookie.com/embed/".concat(e,"?").concat(aF),g.thumb=g.thumb||"https://i.ytimg.com/vi/".concat(e,"/mqdefault.jpg"),g.vendor="youtube",a="video"}else if(Z=U.match(/^.+vimeo.com\/(?:\/)?([\d]+)(.*)?/)){var ab=o(this.fancybox.option("Html.vimeo")),H=encodeURIComponent(Z[1]);g.videoId=H,g.src="https://player.vimeo.com/video/".concat(H,"?").concat(ab),g.vendor="vimeo",a="video"}else(Z=U.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(g.src="//maps.google.".concat(Z[1],"/?ll=").concat((Z[2]?Z[2]+"&z="+Math.floor(Z[3])+(Z[4]?Z[4].replace(/^\//,"&"):""):Z[4]+"").replace(/\?/,"&"),"&output=").concat(Z[4]&&Z[4].indexOf("layer=c")>0?"svembed":"embed"),a="map"):(Z=U.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(g.src="//maps.google.".concat(Z[1],"/maps?q=").concat(Z[2].replace("query=","q=").replace("api=1",""),"&output=embed"),a="map");a||("#"===U.charAt(0)?a="inline":(Z=U.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(a="html5video",g.format=g.format||"video/"+("ogv"===Z[1]?"ogg":Z[1])):U.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?a="image":U.match(/\.(pdf)((\?|#).*)?$/i)&&(a="pdf")),g.type=a||this.fancybox.option("defaultType","image"),"html5video"!==a&&"video"!==a||(g.video=eS({},this.fancybox.option("Html.video"),g.video),g.width&&g.height?g.ratio=parseFloat(g.width)/parseFloat(g.height):g.ratio=g.ratio||g.video.ratio)}}},{key:"onReady",value:function(){var g=this;this.fancybox.Carousel.slides.forEach(function(U){U.$el&&(g.setContent(U),U.index===g.fancybox.getSlide().index&&g.playVideo(U))})}},{key:"onCreateSlide",value:function(g,U,a){"ready"===this.fancybox.state&&this.setContent(a)}},{key:"loadInlineContent",value:function(g){var U;if(g.src instanceof HTMLElement)U=g.src;else if("string"==typeof g.src){var a=g.src.split("#",2),Z=2===a.length&&""===a[0]?a[1]:a[0];U=document.getElementById(Z)}if(U){if("clone"===g.type||U.$placeHolder){var aF=(U=U.cloneNode(!0)).getAttribute("id");aF=aF?"".concat(aF,"--clone"):"clone-".concat(this.fancybox.id,"-").concat(g.index),U.setAttribute("id",aF)}else{var e=document.createElement("div");e.classList.add("fancybox-placeholder"),U.parentNode.insertBefore(e,U),U.$placeHolder=e}this.fancybox.setContent(g,U)}else this.fancybox.setError(g,"{{ELEMENT_NOT_FOUND}}")}},{key:"loadAjaxContent",value:function(g){var U=this.fancybox,a=new XMLHttpRequest;U.showLoading(g),a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&"ready"===U.state&&(U.hideLoading(g),200===a.status?U.setContent(g,a.responseText):U.setError(g,404===a.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))},a.open("GET",g.src),a.send(g.ajax||null),g.xhr=a}},{key:"loadIframeContent",value:function(g){var U=this,a=this.fancybox,Z=document.createElement("iframe");if(Z.className="fancybox__iframe",Z.setAttribute("id","fancybox__iframe_".concat(a.id,"_").concat(g.index)),Z.setAttribute("allow","autoplay; fullscreen"),Z.setAttribute("scrolling","auto"),g.$iframe=Z,"iframe"!==g.type||!1===g.preload)return Z.setAttribute("src",g.src),void this.fancybox.setContent(g,Z);a.showLoading(g);var aF=document.createElement("div");aF.style.visibility="hidden",this.fancybox.setContent(g,aF),aF.appendChild(Z),Z.onerror=function(){a.setError(g,"{{IFRAME_ERROR}}")},Z.onload=function(){a.hideLoading(g);var aF=!1;"yes"!==Z.dataset.ready&&(Z.dataset.ready="yes",aF=!0),Z.src.length&&(Z.parentNode.style.visibility="",!1!==g.autoSize&&U.autoSizeIframe(Z),aF&&a.revealContent(g))},Z.setAttribute("src",g.src)}},{key:"setAspectRatio",value:function(g){var U=g.ratio;if(U&&g.$content){g.$content.style.maxWidth="",g.$content.style.maxHeight="";var a=g.$content.offsetWidth,Z=g.$content.offsetHeight,aF=g.width,e=g.height;if(aF&&e&&(a>aF||Z>e)){var ab=Math.min(aF/a,e/Z);a*=ab,Z*=ab}U<a/Z?a=Z*U:Z=a/U,g.$content.style.maxWidth="".concat(a,"px"),g.$content.style.maxHeight="".concat(Z,"px")}}},{key:"autoSizeIframe",value:function(g){if(g.dataset&&"yes"===g.dataset.ready){var U=g.parentNode.style;U.flex="1 1 auto",U.width="",U.height="";try{var a=g.contentWindow.document,Z=a.getElementsByTagName("html")[0],aF=a.body,e=window.getComputedStyle(g.parentNode),ab=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),H=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom);aF.style.overflow="hidden";var c=Z.scrollWidth;U.width="".concat(c+ab,"px"),aF.style.overflow="",U.flex="",U.flexShrink="0",U.height="".concat(aF.scrollHeight,"px");var Q=Z.scrollHeight;U.height="".concat(Q+H,"px")}catch(g){U=""}}}},{key:"onRefresh",value:function(g,U){var a=this;U.slides.forEach(function(g){g.$el&&(g.$iframe&&!1!==g.autoSize&&a.autoSizeIframe(g.$iframe),g.ratio&&a.setAspectRatio(g))})}},{key:"setContent",value:function(g){if(g&&!g.isDom){switch(g.type){case"html":this.fancybox.setContent(g,g.src);break;case"html5video":this.fancybox.setContent(g,this.fancybox.option("Html.html5video.tpl").replace(/\{\{src\}\}/gi,g.src).replace("{{format}}",g.format||g.html5video&&g.html5video.format||"").replace("{{poster}}",g.thumb||""));break;case"inline":case"clone":this.loadInlineContent(g);break;case"ajax":this.loadAjaxContent(g);break;case"iframe":case"pdf":case"video":case"map":this.loadIframeContent(g)}g.ratio&&this.setAspectRatio(g)}}},{key:"onSelectSlide",value:function(g,U,a){"ready"===g.state&&this.playVideo(a)}},{key:"playVideo",value:function(g){if("html5video"===g.type){var U=g.$el.querySelector("video");if(U)try{U.play()}catch(g){}}if("video"===g.type&&g.$iframe&&g.$iframe.contentWindow){!function U(){if("done"===g.state&&g.$iframe&&g.$iframe.contentWindow){var a;if(g.$iframe.isReady)return g.video&&g.video.autoplay&&(a="youtube"==g.vendor?{event:"command",func:"playVideo"}:{method:"play",value:"true"}),void(a&&g.$iframe.contentWindow.postMessage(JSON.stringify(a),"*"));"youtube"===g.vendor&&(a={event:"listening",id:g.$iframe.getAttribute("id")},g.$iframe.contentWindow.postMessage(JSON.stringify(a),"*")),g.poller=setTimeout(U,250)}}()}}},{key:"onUnselectSlide",value:function(g,U,a){if("html5video"!==a.type){var Z=!1;"vimeo"==a.vendor?Z={method:"pause",value:"true"}:"youtube"===a.vendor&&(Z={event:"command",func:"pauseVideo"}),Z&&a.$iframe&&a.$iframe.contentWindow&&a.$iframe.contentWindow.postMessage(JSON.stringify(Z),"*"),clearTimeout(a.poller)}else try{a.$el.querySelector("video").pause()}catch(g){}}},{key:"onRemoveSlide",value:function(g,U,a){a.xhr&&(a.xhr.abort(),a.xhr=null),a.$iframe&&(a.$iframe.onload=a.$iframe.onerror=null,a.$iframe.src="//about:blank",a.$iframe=null);var Z=a.$content;"inline"===a.type&&Z&&(Z.classList.remove("fancybox__content"),"none"!==Z.style.display&&(Z.style.display="none"),a.$closeButton&&(a.$closeButton.remove(),a.$closeButton=null));var aF=Z&&Z.$placeHolder;aF&&(aF.parentNode.insertBefore(Z,aF),aF.remove(),Z.$placeHolder=null)}},{key:"onMessage",value:function(g){try{var U=JSON.parse(g.data);if("https://player.vimeo.com"===g.origin){if("ready"===U.event){var a,Z=bi(document.getElementsByClassName("fancybox__iframe"));try{for(Z.s();!(a=Z.n()).done;){var aF=a.value;aF.contentWindow===g.source&&(aF.isReady=1)}}catch(g){Z.e(g)}finally{Z.f()}}}else"https://www.youtube-nocookie.com"===g.origin&&"onReady"===U.event&&(document.getElementById(U.id).isReady=1)}catch(g){}}},{key:"attach",value:function(){this.fancybox.on(this.events),window.addEventListener("message",this.onMessage,!1)}},{key:"detach",value:function(){this.fancybox.off(this.events),window.removeEventListener("message",this.onMessage,!1)}}]),g}();p.defaults={video:{autoplay:!0,ratio:16/9},youtube:{autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},vimeo:{hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},html5video:{tpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />\n  Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!\n</video>',format:""}};var q=function(){function g(U){aF(this,g),this.fancybox=U;for(var a=0,Z=["onReady","onClosing","onDone","onPageChange","onCreateSlide","onRemoveSlide","onImageStatusChange"];a<Z.length;a++){var e=Z[a];this[e]=this[e].bind(this)}this.events={ready:this.onReady,closing:this.onClosing,done:this.onDone,"Carousel.change":this.onPageChange,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide}}return ab(g,[{key:"onReady",value:function(){var g=this;this.fancybox.Carousel.slides.forEach(function(U){U.$el&&g.setContent(U)})}},{key:"onDone",value:function(g,U){this.handleCursor(U)}},{key:"onClosing",value:function(g){clearTimeout(this.clickTimer),g.Carousel.slides.forEach(function(g){g.$image&&(g.state="destroy"),g.Panzoom&&g.Panzoom.detachEvents()}),"closing"===this.fancybox.state&&this.canZoom(g.getSlide())&&this.zoomOut()}},{key:"onCreateSlide",value:function(g,U,a){"ready"===this.fancybox.state&&this.setContent(a)}},{key:"onRemoveSlide",value:function(g,U,a){a.$image&&(a.$el.classList.remove(g.option("Image.canZoomInClass")),a.$image.remove(),a.$image=null),a.Panzoom&&(a.Panzoom.destroy(),a.Panzoom=null),a.$el&&a.$el.dataset&&delete a.$el.dataset.imageFit}},{key:"setContent",value:function(g){var U=this;if(!(g.isDom||g.html||g.type&&"image"!==g.type||g.$image)){g.type="image",g.state="loading";var a=document.createElement("div");a.style.visibility="hidden";var Z=document.createElement("img");Z.addEventListener("load",function(a){a.stopImmediatePropagation(),U.onImageStatusChange(g)}),Z.addEventListener("error",function(){U.onImageStatusChange(g)}),Z.src=g.src,Z.alt="",Z.draggable=!1,Z.classList.add("fancybox__image"),g.srcset&&Z.setAttribute("srcset",g.srcset),g.sizes&&Z.setAttribute("sizes",g.sizes),g.$image=Z;var aF=this.fancybox.option("Image.wrap");if(aF){var e=document.createElement("div");e.classList.add("string"==typeof aF?aF:"fancybox__image-wrap"),e.appendChild(Z),a.appendChild(e),g.$wrap=e}else a.appendChild(Z);g.$el.dataset.imageFit=this.fancybox.option("Image.fit"),this.fancybox.setContent(g,a),Z.complete||Z.error?this.onImageStatusChange(g):this.fancybox.showLoading(g)}}},{key:"onImageStatusChange",value:function(g){var U=this,a=g.$image;a&&"loading"===g.state&&(a.complete&&a.naturalWidth&&a.naturalHeight?(this.fancybox.hideLoading(g),"contain"===this.fancybox.option("Image.fit")&&this.initSlidePanzoom(g),g.$el.addEventListener("wheel",function(a){return U.onWheel(g,a)},{passive:!1}),g.$content.addEventListener("click",function(a){return U.onClick(g,a)},{passive:!1}),this.revealContent(g)):this.fancybox.setError(g,"{{IMAGE_ERROR}}"))}},{key:"initSlidePanzoom",value:function(g){var U=this;g.Panzoom||(g.Panzoom=new df(g.$el,eS(!0,this.fancybox.option("Image.Panzoom",{}),{viewport:g.$wrap,content:g.$image,wrapInner:!1,textSelection:!0,touch:this.fancybox.option("Image.touch"),panOnlyZoomed:!0,click:!1,wheel:!1})),g.Panzoom.on("startAnimation",function(){U.fancybox.trigger("Image.startAnimation",g)}),g.Panzoom.on("endAnimation",function(){"zoomIn"===g.state&&U.fancybox.done(g),U.handleCursor(g),U.fancybox.trigger("Image.endAnimation",g)}),g.Panzoom.on("afterUpdate",function(){U.handleCursor(g),U.fancybox.trigger("Image.afterUpdate",g)}))}},{key:"revealContent",value:function(g){null===this.fancybox.Carousel.prevPage&&g.index===this.fancybox.options.startIndex&&this.canZoom(g)?this.zoomIn():this.fancybox.revealContent(g)}},{key:"getZoomInfo",value:function(g){var U=g.$thumb.getBoundingClientRect(),a=U.width,Z=U.height,aF=g.$content.getBoundingClientRect(),e=aF.width,ab=aF.height,H=aF.top-U.top,c=aF.left-U.left,Q=this.fancybox.option("Image.zoomOpacity");return"auto"===Q&&(Q=Math.abs(a/Z-e/ab)>.1),{top:H,left:c,scale:U.width/e,opacity:Q}}},{key:"canZoom",value:function(g){var U=this.fancybox,a=U.$container;if(window.visualViewport&&1!==window.visualViewport.scale)return!1;if(!U.option("Image.zoom")||"contain"!==U.option("Image.fit"))return!1;var Z=g.$thumb;if(!Z||"loading"===g.state)return!1;a.classList.add("fancybox__no-click");var aF,e=Z.getBoundingClientRect();if(this.fancybox.option("Image.ignoreCoveredThumbnail")){var ab=document.elementFromPoint(e.left+1,e.top+1)===Z,H=document.elementFromPoint(e.right-1,e.bottom-1)===Z;aF=ab&&H}else aF=document.elementFromPoint(e.left+.5*e.width,e.top+.5*e.height)===Z;return a.classList.remove("fancybox__no-click"),aF}},{key:"zoomIn",value:function(){var g=this.fancybox,U=g.getSlide(),a=U.Panzoom,Z=this.getZoomInfo(U),aF=Z.top,e=Z.left,ab=Z.scale,H=Z.opacity;U.state="zoomIn",g.trigger("reveal",U),a.panTo({x:-1*e,y:-1*aF,scale:ab,friction:0,ignoreBounds:!0}),U.$content.style.visibility="",!0===H&&a.on("afterTransform",function(g){"zoomIn"!==U.state&&"zoomOut"!==U.state||(g.$content.style.opacity=Math.min(1,1-(1-g.content.scale)/(1-ab)))}),a.panTo({x:0,y:0,scale:1,friction:this.fancybox.option("Image.zoomFriction")})}},{key:"zoomOut",value:function(){var g=this,U=this.fancybox,a=U.getSlide(),Z=a.Panzoom;if(Z){a.state="zoomOut",U.state="customClosing",a.$caption&&(a.$caption.style.visibility="hidden");var aF=this.fancybox.option("Image.zoomFriction"),e=function(U){var e=g.getZoomInfo(a),ab=e.top,H=e.left,c=e.scale,Q=e.opacity;U||Q||(aF*=.82),Z.panTo({x:-1*H,y:-1*ab,scale:c,friction:aF,ignoreBounds:!0}),aF*=.98};window.addEventListener("scroll",e),Z.on("endAnimation",function(){window.removeEventListener("scroll",e),U.destroy()}),e()}}},{key:"handleCursor",value:function(g){if("image"===g.type){var U=g.Panzoom,a=this.fancybox.option("Image.click"),Z=g.$el.classList;if(U&&"toggleZoom"===a)Z[U&&1===U.content.scale&&U.option("maxScale")-U.content.scale>.01?"add":"remove"](this.fancybox.option("Image.canZoomInClass"));else"close"===a&&Z.add(this.fancybox.option("Image.canZoomOutClass"))}}},{key:"onWheel",value:function(g,U){if("ready"===this.fancybox.state&&!1!==this.fancybox.trigger("Image.wheel",U))switch(this.fancybox.option("Image.wheel")){case"zoom":g.Panzoom&&g.Panzoom.zoomWithWheel(U);break;case"close":this.fancybox.close();break;case"slide":this.fancybox[U.deltaY<0?"prev":"next"]()}}},{key:"onClick",value:function(g,U){var a=this;if("ready"===this.fancybox.state){var Z=g.Panzoom;if(!Z||!Z.dragPosition.midPoint&&0===Z.dragOffset.x&&0===Z.dragOffset.y&&1===Z.dragOffset.scale){if(this.fancybox.Carousel.Panzoom.lockAxis)return!1;var aF=function(Z){if(!1!==a.fancybox.trigger("Image.click",U))switch(Z){case"toggleZoom":U.stopPropagation(),g.Panzoom&&g.Panzoom.zoomWithClick(U);break;case"close":a.fancybox.close();break;case"next":U.stopPropagation(),a.fancybox.next()}};this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null);var e=this.fancybox.option("Image.click"),ab=this.fancybox.option("Image.doubleClick");ab?1===U.detail?this.clickTimer=setTimeout(function(){aF(e)},300):2===U.detail&&aF(ab):aF(e)}}}},{key:"onPageChange",value:function(g,U){var a=g.getSlide();U.slides.forEach(function(g){g.Panzoom&&"done"===g.state&&g.index!==a.index&&g.Panzoom.panTo({x:0,y:0,scale:1,friction:.8})})}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events)}}]),g}();q.defaults={canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",zoom:!0,zoomOpacity:"auto",zoomFriction:.82,ignoreCoveredThumbnail:!1,touch:!0,click:"toggleZoom",doubleClick:null,wheel:"zoom",fit:"contain",wrap:!1,Panzoom:{ratio:1}};var r=function(){var g=window.location.hash.substr(1),U=g.split("-"),a=U.length>1&&/^\+?\d+$/.test(U[U.length-1])&&parseInt(U.pop(-1),10)||null;return{hash:g,slug:U.join("-"),index:a}},s=function(){function g(U){aF(this,g),this.fancybox=U;for(var a=0,Z=["onChange","onClosing"];a<Z.length;a++){var e=Z[a];this[e]=this[e].bind(this)}this.events={initCarousel:this.onChange,"Carousel.change":this.onChange,closing:this.onClosing},this.hasCreatedHistory=!1,this.origHash="",this.timer=null}return ab(g,[{key:"onChange",value:function(){var g=this,U=this.fancybox,a=U.Carousel;this.timer&&clearTimeout(this.timer);var Z=null===a.prevPage,aF=U.getSlide(),e=aF.$trigger&&aF.$trigger.dataset,ab=window.location.hash.substr(1),H=!1;if(aF.slug)H=aF.slug;else{var c=e&&e.fancybox;c&&c.length&&"true"!==c&&(H=c+(a.slides.length>1?"-"+(aF.index+1):""))}Z&&(this.origHash=ab!==H?this.origHash:""),H&&ab!==H&&(this.timer=setTimeout(function(){try{window.history[Z?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+"#"+H),Z&&(g.hasCreatedHistory=!0)}catch(g){}},300))}},{key:"onClosing",value:function(){if(this.timer&&clearTimeout(this.timer),!0!==this.hasSilentClose){if(!this.hasCreatedHistory)try{return void window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash?"#"+this.origHash:""))}catch(g){}window.history.back()}}},{key:"attach",value:function(g){g.on(this.events)}},{key:"detach",value:function(g){g.off(this.events)}}],[{key:"startFromUrl",value:function(){if(!g.Fancybox.getInstance()){var U=r(),a=U.hash,Z=U.slug,aF=U.index;if(Z){var e=document.querySelector('[data-slug="'.concat(a,'"]'));if(e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),!g.Fancybox.getInstance()){var ab=document.querySelectorAll('[data-fancybox="'.concat(Z,'"]'));ab.length&&(null===aF&&1===ab.length?e=ab[0]:aF&&(e=ab[aF-1]),e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}}}}},{key:"onHashChange",value:function(){var U=r(),a=U.slug,Z=U.index,aF=g.Fancybox.getInstance();if(aF){if(a){var e,ab=aF.Carousel,H=bi(ab.slides);try{for(H.s();!(e=H.n()).done;){var c=e.value;if(c.slug&&c.slug===a)return ab.slideTo(c.index)}}catch(g){H.e(g)}finally{H.f()}var Q=aF.getSlide(),ai=Q.$trigger&&Q.$trigger.dataset;if(ai&&ai.fancybox===a)return ab.slideTo(Z-1)}aF.plugins.Hash.hasSilentClose=!0,aF.close()}g.startFromUrl()}},{key:"onReady",value:function(){window.addEventListener("hashchange",g.onHashChange,!1),g.startFromUrl()}},{key:"create",value:function(){l&&window.requestAnimationFrame(function(){g.onReady()})}},{key:"destroy",value:function(){window.removeEventListener("hashchange",g.onHashChange,!1)}}]),g}(),t={pageXOffset:0,pageYOffset:0,element:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},activate:function(g){t.pageXOffset=window.pageXOffset,t.pageYOffset=window.pageYOffset,g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()},deactivate:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},u=function(){function g(U){aF(this,g),this.fancybox=U,this.active=!1,this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}return ab(g,[{key:"isActive",value:function(){return this.active}},{key:"setTimer",value:function(){var g=this;if(this.active&&!this.timer){var U=this.fancybox.option("slideshow.delay",3e3);this.timer=setTimeout(function(){g.timer=null,g.fancybox.option("infinite")||g.fancybox.getSlide().index!==g.fancybox.Carousel.slides.length-1?g.fancybox.next():g.fancybox.jumpTo(0,{friction:0})},U);var a=this.$progress;a||((a=document.createElement("div")).classList.add("fancybox__progress"),this.fancybox.$carousel.parentNode.insertBefore(a,this.fancybox.$carousel),this.$progress=a,a.offsetHeight),a.style.transitionDuration="".concat(U,"ms"),a.style.transform="scaleX(1)"}}},{key:"clearTimer",value:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&(this.$progress.style.transitionDuration="",this.$progress.style.transform="",this.$progress.offsetHeight)}},{key:"activate",value:function(){this.active||(this.active=!0,this.fancybox.$container.classList.add("has-slideshow"),"done"===this.fancybox.getSlide().state&&this.setTimer(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1))}},{key:"handleVisibilityChange",value:function(){this.deactivate()}},{key:"deactivate",value:function(){this.active=!1,this.clearTimer(),this.fancybox.$container.classList.remove("has-slideshow"),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1)}},{key:"toggle",value:function(){this.active?this.deactivate():this.fancybox.Carousel.slides.length>1&&this.activate()}}]),g}(),v={items:{counter:{type:"div",class:"fancybox__counter",html:'<span data-fancybox-index=""></span>&nbsp;/&nbsp;<span data-fancybox-count=""></span>',tabindex:-1,position:"left"},prev:{type:"button",class:"fancybox__button--prev",label:"PREV",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 4l-8 8 8 8"/></svg>',click:function(g){g.preventDefault(),this.fancybox.prev()}},next:{type:"button",class:"fancybox__button--next",label:"NEXT",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M8 4l8 8-8 8"/></svg>',click:function(g){g.preventDefault(),this.fancybox.next()}},fullscreen:{type:"button",class:"fancybox__button--fullscreen",label:"TOGGLE_FULLSCREEN",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1">\n                <g><path d="M3 8 V3h5"></path><path d="M21 8V3h-5"></path><path d="M8 21H3v-5"></path><path d="M16 21h5v-5"></path></g>\n                <g><path d="M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5"/></g>\n            </svg>',click:function(g){g.preventDefault(),t.element()?t.deactivate():t.activate(this.fancybox.$container)}},slideshow:{type:"button",class:"fancybox__button--slideshow",label:"TOGGLE_SLIDESHOW",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1">\n                <g><path d="M6 4v16"/><path d="M20 12L6 20"/><path d="M20 12L6 4"/></g>\n                <g><path d="M7 4v15M17 4v15"/></g>\n            </svg>',click:function(g){g.preventDefault(),this.Slideshow.toggle()}},zoom:{type:"button",class:"fancybox__button--zoom",label:"TOGGLE_ZOOM",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><circle cx="10" cy="10" r="7"></circle><path d="M16 16 L21 21"></svg>',click:function(g){g.preventDefault();var U=this.fancybox.getSlide().Panzoom;U&&U.toggleZoom()}},download:{type:"link",label:"DOWNLOAD",class:"fancybox__button--download",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17"/></svg>',click:function(g){g.stopPropagation()}},thumbs:{type:"button",label:"TOGGLE_THUMBS",class:"fancybox__button--thumbs",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><circle cx="4" cy="4" r="1" /><circle cx="12" cy="4" r="1" transform="rotate(90 12 4)"/><circle cx="20" cy="4" r="1" transform="rotate(90 20 4)"/><circle cx="4" cy="12" r="1" transform="rotate(90 4 12)"/><circle cx="12" cy="12" r="1" transform="rotate(90 12 12)"/><circle cx="20" cy="12" r="1" transform="rotate(90 20 12)"/><circle cx="4" cy="20" r="1" transform="rotate(90 4 20)"/><circle cx="12" cy="20" r="1" transform="rotate(90 12 20)"/><circle cx="20" cy="20" r="1" transform="rotate(90 20 20)"/></svg>',click:function(g){g.stopPropagation();var U=this.fancybox.plugins.Thumbs;U&&U.toggle()}},close:{type:"button",label:"CLOSE",class:"fancybox__button--close",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"></path></svg>',tabindex:1,click:function(g){g.stopPropagation(),g.preventDefault(),this.fancybox.close()}}},display:["counter","zoom","slideshow","fullscreen","thumbs","close"],autoEnable:!0},w=function(){function g(U){var a=this;aF(this,g),this.fancybox=U,this.$container=null,this.state="init";for(var Z=0,e=["onInit","onPrepare","onDone","onKeydown","onClosing","onChange","onSettle","onRefresh"];Z<e.length;Z++){var ab=e[Z];this[ab]=this[ab].bind(this)}this.events={init:this.onInit,prepare:this.onPrepare,done:this.onDone,keydown:this.onKeydown,closing:this.onClosing,"Carousel.change":this.onChange,"Carousel.settle":this.onSettle,"Carousel.Panzoom.touchStart":function(){return a.onRefresh()},"Image.startAnimation":function(g,U){return a.onRefresh(U)},"Image.afterUpdate":function(g,U){return a.onRefresh(U)}}}return ab(g,[{key:"onInit",value:function(){if(this.fancybox.option("Toolbar.autoEnable")){var g,U=!1,a=bi(this.fancybox.items);try{for(a.s();!(g=a.n()).done;){if("image"===g.value.type){U=!0;break}}}catch(g){a.e(g)}finally{a.f()}if(!U)return void(this.state="disabled")}var Z,aF=bi(this.fancybox.option("Toolbar.display"));try{for(aF.s();!(Z=aF.n()).done;){var e=Z.value;if("close"===(gh(e)?e.id:e)){this.fancybox.options.closeButton=!1;break}}}catch(g){aF.e(g)}finally{aF.f()}}},{key:"onPrepare",value:function(){if("init"===this.state&&(this.build(),this.update(),this.Slideshow=new u(this.fancybox),!this.fancybox.Carousel.prevPage&&(this.fancybox.option("slideshow.autoStart")&&this.Slideshow.activate(),this.fancybox.option("fullscreen.autoStart")&&!t.element())))try{t.activate(this.fancybox.$container)}catch(g){}}},{key:"onFsChange",value:function(){window.scrollTo(t.pageXOffset,t.pageYOffset)}},{key:"onSettle",value:function(){this.Slideshow&&this.Slideshow.isActive()&&(this.fancybox.getSlide().index!==this.fancybox.Carousel.slides.length-1||this.fancybox.option("infinite")?"done"===this.fancybox.getSlide().state&&this.Slideshow.setTimer():this.Slideshow.deactivate())}},{key:"onChange",value:function(){this.update(),this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer()}},{key:"onDone",value:function(g,U){U.index===g.getSlide().index&&(this.update(),this.Slideshow&&this.Slideshow.isActive()&&(this.fancybox.option("infinite")||U.index!==this.fancybox.Carousel.slides.length-1?this.Slideshow.setTimer():this.Slideshow.deactivate()))}},{key:"onRefresh",value:function(g){g&&g.index!==this.fancybox.getSlide().index||(this.update(),!this.Slideshow||!this.Slideshow.isActive()||g&&"done"!==g.state||this.Slideshow.deactivate())}},{key:"onKeydown",value:function(g,U,a){" "===U&&(this.Slideshow.toggle(),a.preventDefault())}},{key:"onClosing",value:function(){this.Slideshow&&this.Slideshow.deactivate(),document.removeEventListener("fullscreenchange",this.onFsChange)}},{key:"createElement",value:function(g){var U,a;("div"===g.type?U=document.createElement("div"):(U=document.createElement("link"===g.type?"a":"button")).classList.add("carousel__button"),U.innerHTML=g.html,U.setAttribute("tabindex",g.tabindex||0),g.class)&&(a=U.classList).add.apply(a,C(g.class.split(" ")));return g.label&&U.setAttribute("title",this.fancybox.localize("{{".concat(g.label,"}}"))),g.click&&U.addEventListener("click",g.click.bind(this)),"prev"===g.id&&U.setAttribute("data-fancybox-prev",""),"next"===g.id&&U.setAttribute("data-fancybox-next",""),U}},{key:"build",value:function(){var g=this;this.cleanup();var U,a=this.fancybox.option("Toolbar.items"),Z=[{position:"left",items:[]},{position:"center",items:[]},{position:"right",items:[]}],aF=this.fancybox.plugins.Thumbs,e=bi(this.fancybox.option("Toolbar.display"));try{var ab=function(){var e=U.value,ab=void 0,H=void 0;if(gh(e)?(ab=e.id,H=eS({},a[ab],e)):H=a[ab=e],["counter","next","prev","slideshow"].includes(ab)&&g.fancybox.items.length<2)return"continue";if("fullscreen"===ab){if(!document.fullscreenEnabled||window.fullScreen)return"continue";document.addEventListener("fullscreenchange",g.onFsChange)}if("thumbs"===ab&&(!aF||"disabled"===aF.state))return"continue";if(!H)return"continue";var c=H.position||"right",Q=Z.find(function(g){return g.position===c});Q&&Q.items.push(H)};for(e.s();!(U=e.n()).done;)ab()}catch(g){e.e(g)}finally{e.f()}var H=document.createElement("div");H.classList.add("fancybox__toolbar");for(var c=0,Q=Z;c<Q.length;c++){var ai=Q[c];if(ai.items.length){var f=document.createElement("div");f.classList.add("fancybox__toolbar__items"),f.classList.add("fancybox__toolbar__items--".concat(ai.position));var E,gD=bi(ai.items);try{for(gD.s();!(E=gD.n()).done;){var b=E.value;f.appendChild(this.createElement(b))}}catch(g){gD.e(g)}finally{gD.f()}H.appendChild(f)}}this.fancybox.$carousel.parentNode.insertBefore(H,this.fancybox.$carousel),this.$container=H}},{key:"update",value:function(){var g,U=this.fancybox.getSlide(),a=U.index,Z=this.fancybox.items.length,aF=U.downloadSrc||("image"!==U.type||U.error?null:U.src),e=bi(this.fancybox.$container.querySelectorAll("a.fancybox__button--download"));try{for(e.s();!(g=e.n()).done;){var ab=g.value;aF?(ab.removeAttribute("disabled"),ab.setAttribute("href",aF),ab.setAttribute("download",aF),ab.setAttribute("target","_blank")):(ab.setAttribute("disabled",""),ab.removeAttribute("href"),ab.removeAttribute("download"))}}catch(g){e.e(g)}finally{e.f()}var H,c=U.Panzoom,Q=c&&c.option("maxScale")>c.option("baseScale"),ai=bi(this.fancybox.$container.querySelectorAll(".fancybox__button--zoom"));try{for(ai.s();!(H=ai.n()).done;){var f=H.value;Q?f.removeAttribute("disabled"):f.setAttribute("disabled","")}}catch(g){ai.e(g)}finally{ai.f()}var E,gD=bi(this.fancybox.$container.querySelectorAll("[data-fancybox-index]"));try{for(gD.s();!(E=gD.n()).done;){E.value.innerHTML=U.index+1}}catch(g){gD.e(g)}finally{gD.f()}var b,C=bi(this.fancybox.$container.querySelectorAll("[data-fancybox-count]"));try{for(C.s();!(b=C.n()).done;){b.value.innerHTML=Z}}catch(g){C.e(g)}finally{C.f()}if(!this.fancybox.option("infinite")){var fM,eg=bi(this.fancybox.$container.querySelectorAll("[data-fancybox-prev]"));try{for(eg.s();!(fM=eg.n()).done;){var gh=fM.value;0===a?gh.setAttribute("disabled",""):gh.removeAttribute("disabled")}}catch(g){eg.e(g)}finally{eg.f()}var eS,af=bi(this.fancybox.$container.querySelectorAll("[data-fancybox-next]"));try{for(af.s();!(eS=af.n()).done;){var fQ=eS.value;a===Z-1?fQ.setAttribute("disabled",""):fQ.removeAttribute("disabled")}}catch(g){af.e(g)}finally{af.f()}}}},{key:"cleanup",value:function(){this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer(),this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),g}();w.defaults=v;var x={ScrollLock:m,Thumbs:n,Html:p,Toolbar:w,Image:q,Hash:s},y={startIndex:0,preload:1,infinite:!0,showClass:"fancybox-zoomInUp",hideClass:"fancybox-fadeOut",animated:!0,hideScrollbar:!0,parentEl:null,mainClass:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inside",dragToClose:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="25 25 50 50" tabindex="-1"><circle cx="50" cy="50" r="20"/></svg>',main:null},l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}},z=0,A=function(g){c(a,g);var U=gD(a);function a(g){var Z,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return aF(this,a),(Z=U.call(this,eS(!0,{},y,e))).bindHandlers(),Z.state="init",Z.setItems(g),Z.attachPlugins(a.Plugins),Z.trigger("init"),!0===Z.option("hideScrollbar")&&Z.hideScrollbar(),Z.initLayout(),Z.initCarousel(),Z.attachEvents(),Z.trigger("prepare"),Z.state="ready",Z.trigger("ready"),Z.$container.setAttribute("aria-hidden","false"),Z.option("trapFocus")&&Z.focus(),Z}return ab(a,[{key:"bindHandlers",value:function(){for(var g=0,U=["onMousedown","onKeydown","onClick","onCreateSlide","onTouchMove","onTouchEnd","onTransform"];g<U.length;g++){var a=U[g];this[a]=this[a].bind(this)}}},{key:"attachEvents",value:function(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.$container.addEventListener("click",this.onClick)}},{key:"detachEvents",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown),this.$container.removeEventListener("click",this.onClick)}},{key:"initLayout",value:function(){var g=this;this.$root=this.option("parentEl")||document.body;var U=this.option("template.main");U&&(this.$root.insertAdjacentHTML("beforeend",this.localize(U)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=function(){return g.$container.scrollLeft=0,!1},Object.entries({class:"fancybox__container",role:"dialog","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach(function(U){var a;return(a=g.$container).setAttribute.apply(a,C(U))}),this.option("animated")&&this.$container.classList.add("is-animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),this.$container.Fancybox=this,this.id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++z,this.$container.setAttribute("id","fancybox-"+this.id));var a,Z=this.options.mainClass;Z&&(a=this.$container.classList).add.apply(a,C(Z.split(" ")));return document.documentElement.classList.add("with-fancybox"),this.trigger("initLayout"),this}},{key:"setItems",value:function(g){var U,a=[],Z=bi(g);try{for(Z.s();!(U=Z.n()).done;){var aF=U.value,e=aF.$trigger;if(e){var ab=e.dataset||{};aF.src=ab.src||e.getAttribute("href")||aF.src,aF.type=ab.type||aF.type,!aF.src&&e instanceof HTMLImageElement&&(aF.src=e.currentSrc||aF.$trigger.src)}var H=aF.$thumb;if(!H){var c=aF.$trigger&&aF.$trigger.origTarget;c&&(H=c instanceof HTMLImageElement?c:c.querySelector("img")),!H&&aF.$trigger&&(H=aF.$trigger instanceof HTMLImageElement?aF.$trigger:aF.$trigger.querySelector("img"))}aF.$thumb=H||null;var Q=aF.thumb;!Q&&aF.$thumb&&(Q=H.currentSrc||H.src),Q||"image"!==aF.type||(Q=aF.src),aF.thumb=Q||null,aF.caption=aF.caption||"",a.push(aF)}}catch(g){Z.e(g)}finally{Z.f()}this.items=a}},{key:"initCarousel",value:function(){var g=this;return this.Carousel=new k(this.$carousel,eS(!0,{},{classNames:{viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"},textSelection:!0,preload:this.option("preload"),friction:.88,slides:this.items,initialPage:this.options.startIndex,slidesPerPage:1,infiniteX:this.option("infinite"),infiniteY:!0,l10n:this.option("l10n"),Dots:!1,Navigation:{classNames:{main:"fancybox__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},Panzoom:{textSelection:!0,panOnlyZoomed:function(){return g.Carousel&&g.Carousel.pages&&g.Carousel.pages.length<2&&!g.options.dragToClose},lockAxis:function(){if(g.Carousel){var U="x";return g.options.dragToClose&&(U+="y"),U}}},on:{"*":function(U){for(var a=arguments.length,Z=new Array(a>1?a-1:0),aF=1;aF<a;aF++)Z[aF-1]=arguments[aF];return g.trigger.apply(g,["Carousel.".concat(U)].concat(Z))},init:function(U){return g.Carousel=U},createSlide:this.onCreateSlide}},this.option("Carousel"))),this.option("dragToClose")&&this.Carousel.Panzoom.on({touchMove:this.onTouchMove,afterTransform:this.onTransform,touchEnd:this.onTouchEnd}),this.trigger("initCarousel"),this}},{key:"onCreateSlide",value:function(g,U){var a=U.caption||"";if("function"==typeof this.options.caption&&(a=this.options.caption.call(this,this,this.Carousel,U)),"string"==typeof a&&a.length){var Z=document.createElement("div"),aF="fancybox__caption_".concat(this.id,"_").concat(U.index);Z.className="fancybox__caption",Z.innerHTML=a,Z.setAttribute("id",aF),U.$caption=U.$el.appendChild(Z),U.$el.classList.add("has-caption"),U.$el.setAttribute("aria-labelledby",aF)}}},{key:"onClick",value:function(g){if(!g.defaultPrevented&&(!g.target.closest(".fancybox__content")&&!window.getSelection().toString().length&&!1!==this.trigger("click",g)))switch(this.option("click")){case"close":this.close();break;case"next":this.next()}}},{key:"onTouchMove",value:function(){var g=this.getSlide().Panzoom;return!g||1===g.content.scale}},{key:"onTouchEnd",value:function(g){var U=g.dragOffset.y;Math.abs(U)>=150||Math.abs(U)>=35&&g.dragOffset.time<350?(this.option("hideClass")&&(this.getSlide().hideClass="fancybox-throwOut".concat(g.content.y<0?"Up":"Down")),this.close()):"y"===g.lockAxis&&g.panTo({y:0})}},{key:"onTransform",value:function(g){if(this.$backdrop){var U=Math.abs(g.content.y),a=U<1?"":Math.max(.33,Math.min(1,1-U/g.content.fitHeight*1.5));this.$container.style.setProperty("--fancybox-ts",a?"0s":""),this.$container.style.setProperty("--fancybox-opacity",a)}}},{key:"onMousedown",value:function(){document.body.classList.add("is-using-mouse")}},{key:"onKeydown",value:function(g){if(a.getInstance().id===this.id){document.body.classList.remove("is-using-mouse");var U=g.key;if("Tab"===U&&this.option("trapFocus"))this.focus(g);else{var Z=this.option("keyboard");if(Z&&!g.ctrlKey&&!g.altKey&&!g.shiftKey){var aF=document.activeElement&&document.activeElement.classList,e=aF&&aF.contains("carousel__button");if("Escape"!==U&&!e)if(g.target.isContentEditable||-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(g.target.nodeName))return;if(!1!==this.trigger("keydown",U,g)){var ab=Z[U];"function"==typeof this[ab]&&this[ab]()}}}}}},{key:"getSlide",value:function(){var g=this.Carousel;if(!g)return null;var U=null===g.page?g.option("initialPage"):g.page,a=g.pages||[];return a.length&&a[U]?a[U].slides[0]:null}},{key:"focus",value:function(g){var U;void 0===a.preventScrollSupported&&(a.preventScrollSupported=(U=!1,document.createElement("div").focus({get preventScroll(){return U=!0,!1}}),U));var Z=function(g){g.setActive?g.setActive():a.preventScrollSupported?g.focus({preventScroll:!0}):g.focus()};if(!(["init","closing","customClosing","destroy"].indexOf(this.state)>-1)){g&&g.preventDefault();var aF=this.getSlide().$el;if(aF){aF.tabIndex=0;var e,ab=[],H=bi([].slice.call(this.$container.querySelectorAll(["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'])));try{for(H.s();!(e=H.n()).done;){var c=e.value;if(!c.classList||!c.classList.contains("fancybox__slide")){var Q=c.closest(".fancybox__slide");Q?Q===aF&&ab[c.hasAttribute("autofocus")?"unshift":"push"](c):ab.push(c)}}}catch(g){H.e(g)}finally{H.f()}if(ab.length){this.Carousel.pages.length>1&&ab.push(aF),ab.sort(function(g,U){return g.tabIndex>U.tabIndex?-1:g.tabIndex<U.tabIndex?1:0});var ai=ab.indexOf(document.activeElement),f=g&&!g.shiftKey,E=g&&g.shiftKey;return f?ai===ab.length-1?Z(ab[0]):Z(ab[ai+1]):E?Z(0===ai?ab[ab.length-1]:ab[ai-1]):ai<0?Z(ab[0]):void 0}}}}},{key:"hideScrollbar",value:function(){if(l){var g=window.innerWidth-document.documentElement.getBoundingClientRect().width,U="fancybox-style-noscroll",a=document.getElementById(U);a||g>0&&((a=document.createElement("style")).id=U,a.type="text/css",a.innerHTML=".compensate-for-scrollbar {padding-right: ".concat(g,";}"),document.getElementsByTagName("head")[0].appendChild(a),document.body.classList.add("compensate-for-scrollbar"))}}},{key:"revealScrollbar",value:function(){document.body.classList.remove("compensate-for-scrollbar");var g=document.getElementById("fancybox-style-noscroll");g&&g.remove()}},{key:"clearContent",value:function(g){this.Carousel.trigger("removeSlide",g),g.$content&&(g.$content.remove(),g.$content=null),g._className&&g.$el.classList.remove(g._className)}},{key:"setContent",value:function(g,U){var a,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},aF=g.$el;if(U instanceof HTMLElement?["img","iframe","video","audio"].indexOf(U.nodeName.toLowerCase())>-1?(a=document.createElement("div")).appendChild(U):a=U:(a=document.createElement("div")).innerHTML=U,!(a instanceof Element))throw new Error("Element expected");return g._className="has-".concat(Z.suffix||g.type||"unknown"),aF.classList.add(g._className),a.classList.add("fancybox__content"),"none"!==a.style.display&&"none"!==window.getComputedStyle(a).getPropertyValue("display")||(a.style.display="flex"),g.id&&a.setAttribute("id",g.id),g.$content=a,aF.prepend(a),this.manageCloseButton(g),"loading"!==g.state&&this.revealContent(g),a}},{key:"manageCloseButton",value:function(g){var U=this,a=void 0===g.closeButton?this.option("closeButton"):g.closeButton;if(a&&("top"!==a||!this.$closeButton)){var Z=document.createElement("button");Z.classList.add("carousel__button","is-close"),Z.setAttribute("title",this.options.l10n.CLOSE),Z.innerHTML=this.option("template.closeButton"),Z.addEventListener("click",function(g){return U.close(g)}),"inside"===a?(g.$closeButton&&g.$closeButton.remove(),g.$closeButton=g.$content.appendChild(Z)):this.$closeButton=this.$container.insertBefore(Z,this.$container.firstChild)}}},{key:"revealContent",value:function(g){var U=this;this.trigger("reveal",g),g.$content.style.visibility="";var a=!1;g.error||"loading"===g.state||null!==this.Carousel.prevPage||g.index!==this.options.startIndex||(a=void 0===g.showClass?this.option("showClass"):g.showClass),a?(g.state="animating",this.animateCSS(g.$content,a,function(){U.done(g)})):this.done(g)}},{key:"animateCSS",value:function(g,U,a){if(g&&g.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),g&&U){g.addEventListener("animationend",function Z(aF){aF.currentTarget===this&&(g.removeEventListener("animationend",Z),a&&a(),g.classList.remove(U))}),g.classList.add(U)}else"function"==typeof a&&a()}},{key:"done",value:function(g){g.state="done",this.trigger("done",g);var U=this.getSlide();U&&g.index===U.index&&this.option("autoFocus")&&this.focus()}},{key:"setError",value:function(g,U){g.error=U,this.hideLoading(g),this.clearContent(g);var a=document.createElement("div");a.classList.add("fancybox-error"),a.innerHTML=this.localize(U||"<p>{{ERROR}}</p>"),this.setContent(g,a,{suffix:"error"})}},{key:"showLoading",value:function(g){var U=this;g.state="loading",g.$el.classList.add("is-loading");var a=g.$el.querySelector(".fancybox__spinner");a||((a=document.createElement("div")).classList.add("fancybox__spinner"),a.innerHTML=this.option("template.spinner"),a.addEventListener("click",function(){U.Carousel.Panzoom.velocity||U.close()}),g.$el.prepend(a))}},{key:"hideLoading",value:function(g){var U=g.$el&&g.$el.querySelector(".fancybox__spinner");U&&(U.remove(),g.$el.classList.remove("is-loading")),"loading"===g.state&&(this.trigger("load",g),g.state="ready")}},{key:"next",value:function(){var g=this.Carousel;g&&g.pages.length>1&&g.slideNext()}},{key:"prev",value:function(){var g=this.Carousel;g&&g.pages.length>1&&g.slidePrev()}},{key:"jumpTo",value:function(){var g;this.Carousel&&(g=this.Carousel).slideTo.apply(g,arguments)}},{key:"close",value:function(g){var U=this;if(g&&g.preventDefault(),!(["closing","customClosing","destroy"].indexOf(this.state)>-1)&&!1!==this.trigger("shouldClose",g)&&(this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",g),"destroy"!==this.state)){this.$container.setAttribute("aria-hidden","true"),this.$container.classList.add("is-closing");var a=this.getSlide();if(this.Carousel.slides.forEach(function(g){g.$content&&g.index!==a.index&&U.Carousel.trigger("removeSlide",g)}),"closing"===this.state){var Z=void 0===a.hideClass?this.option("hideClass"):a.hideClass;this.animateCSS(a.$content,Z,function(){U.destroy()},!0)}}}},{key:"destroy",value:function(){this.state="destroy",this.trigger("destroy");var g=this.option("placeFocusBack")?this.getSlide().$trigger:null;if(this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null,g)if(a.preventScrollSupported)g.focus({preventScroll:!0});else{var U=document.body.scrollTop;g.focus(),document.body.scrollTop=U}var Z=a.getInstance();Z?Z.focus():(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar())}}],[{key:"show",value:function(g){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new a(g,U)}},{key:"fromEvent",value:function(g){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!g.defaultPrevented&&!(g.button&&0!==g.button||g.ctrlKey||g.metaKey||g.shiftKey)){var Z,aF,e,ab=g.target;if((ab.matches("[data-fancybox-trigger]")||(ab=ab.closest("[data-fancybox-trigger]")))&&(Z=ab&&ab.dataset&&ab.dataset.fancyboxTrigger),Z){var H=document.querySelectorAll('[data-fancybox="'.concat(Z,'"]')),c=parseInt(ab.dataset.fancyboxIndex,10)||0;ab=H.length?H[c]:ab}ab||(ab=g.target),Array.from(a.openers.keys()).reverse().some(function(U){if((e=ab).matches(U)||(e=e.closest(U)))return g.preventDefault(),aF=U,!0});var Q=!1;if(aF){U.event=g,U.target=e,e.origTarget=g.target,Q=a.fromOpener(aF,U);var ai=a.getInstance();ai&&"ready"===ai.state&&g.detail&&document.body.classList.add("is-using-mouse")}return Q}}},{key:"fromOpener",value:function(g){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Z=function(g){for(var U=["false","0","no","null","undefined"],a=["true","1","yes"],Z=Object.assign({},g.dataset),aF=0,e=Object.entries(Z);aF<e.length;aF++){var ab=b(e[aF],2),H=ab[0],c=ab[1];if("string"==typeof c||c instanceof String)if(U.indexOf(c)>-1)Z[H]=!1;else if(a.indexOf(Z[H])>-1)Z[H]=!0;else try{Z[H]=JSON.parse(c)}catch(g){Z[H]=c}}return delete Z.fancybox,delete Z.type,g instanceof Element&&(Z.$trigger=g),Z},aF=[],e=U.startIndex||0,ab=U.target||null,H=void 0===(U=eS({},U,a.openers.get(g))).groupAttr?"data-fancybox":U.groupAttr,c=H&&ab&&ab.getAttribute("".concat(H)),Q=void 0!==U.groupAll&&U.groupAll;if(Q||c?(aF=[].slice.call(document.querySelectorAll(g)),Q||(aF=aF.filter(function(g){return g.getAttribute("".concat(H))===c}))):aF=[ab],!aF.length)return!1;var ai=a.getInstance();return!(ai&&aF.indexOf(ai.options.$trigger)>-1)&&(e=ab?aF.indexOf(ab):e,new a(aF=aF.map(Z),eS({},U,{startIndex:e,$trigger:ab})))}},{key:"bind",value:function(g){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l){if(!a.openers.size){document.body.addEventListener("click",a.fromEvent,!1);for(var Z=0,aF=Object.entries(a.Plugins||{});Z<aF.length;Z++){var e=b(aF[Z],2);e[0];var ab=e[1];ab.Fancybox=this,"function"==typeof ab.create&&ab.create()}}a.openers.set(g,U)}}},{key:"unbind",value:function(g){a.openers.delete(g),a.openers.size||a.destroy()}},{key:"destroy",value:function(){for(var g;g=a.getInstance();)g.destroy();a.openers=new Map,document.body.removeEventListener("click",a.fromEvent,!1)}},{key:"getInstance",value:function(g){var U,a=bi(g?[document.getElementById("fancybox-".concat(g))]:Array.from(document.querySelectorAll(".fancybox__container")).reverse());try{for(a.s();!(U=a.n()).done;){var Z=U.value,aF=Z&&Z.Fancybox;if(aF&&"closing"!==aF.state&&"customClosing"!==aF.state)return aF}}catch(g){a.e(g)}finally{a.f()}return null}},{key:"close",value:function(){for(var g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],U=null;U=a.getInstance();)if(U.close(),!g)return}}]),a}(eSc);A.version="4.0.0-beta.2",A.defaults=y,A.openers=new Map,A.Plugins=x,A.bind("[data-fancybox]"),g.Carousel=k,g.Fancybox=A,g.Panzoom=df});